udg_ELEVATORS={}udg_LIGHTS={}gg_rct_Space=nil;gg_trg_Set=nil;gg_unit_n001_0032=nil;gg_unit_n001_0021=nil;gg_dest_B002_0015=nil;gg_dest_B002_0017=nil;gg_dest_B002_0019=nil;gg_dest_B002_0022=nil;gg_unit_n002_0033=nil;gg_unit_n002_0034=nil;function InitGlobals()local a=0;a=0;while true do if a>1 then break end;udg_ELEVATORS[a]=nil;a=a+1 end end;function CreateAllDestructables()local b;local c;local d;gg_dest_B002_0017=BlzCreateDestructableZWithSkin(FourCC("B002"),-104.7,-37.8,134.4,217.000,1.000,0,FourCC("B002"))gg_dest_B002_0019=BlzCreateDestructableZWithSkin(FourCC("B002"),828.0,-62.8,134.4,117.000,1.000,0,FourCC("B002"))gg_dest_B002_0022=BlzCreateDestructableZWithSkin(FourCC("B002"),828.8,542.7,134.4,210.000,1.000,0,FourCC("B002"))gg_dest_B002_0015=BlzCreateDestructableZWithSkin(FourCC("B002"),-121.9,576.3,134.4,358.000,1.000,0,FourCC("B002"))end;function CreateAllItems()local e;BlzCreateItemWithSkin(FourCC("I000"),-155.3,-90.6,FourCC("I000"))BlzCreateItemWithSkin(FourCC("I000"),60.4,-160.3,FourCC("I000"))BlzCreateItemWithSkin(FourCC("I000"),-167.3,-284.7,FourCC("I000"))BlzCreateItemWithSkin(FourCC("I000"),93.2,55.7,FourCC("I000"))BlzCreateItemWithSkin(FourCC("I001"),-407.0,80.9,FourCC("I001"))BlzCreateItemWithSkin(FourCC("I001"),-252.0,37.1,FourCC("I001"))BlzCreateItemWithSkin(FourCC("I002"),-361.7,571.7,FourCC("I002"))BlzCreateItemWithSkin(FourCC("I003"),-265.1,602.5,FourCC("I003"))end;function CreateUnitsForPlayer20()local f=Player(20)local g;local h;local c;local d;g=BlzCreateUnitWithSkin(f,FourCC("uaco"),328.3,-2182.2,197.837,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),663.9,-302.4,250.155,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),460.5,-541.0,120.974,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),396.1,-598.2,132.774,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),337.8,-628.5,305.078,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),260.3,-658.4,315.998,FourCC("uaco"))g=BlzCreateUnitWithSkin(f,FourCC("uaco"),184.7,-671.5,193.893,FourCC("uaco"))end;function CreateNeutralHostile()local f=Player(PLAYER_NEUTRAL_AGGRESSIVE)local g;local h;local c;local d;g=BlzCreateUnitWithSkin(f,FourCC("ntrd"),1398.0,286.8,210.264,FourCC("ntrd"))g=BlzCreateUnitWithSkin(f,FourCC("ntrd"),1224.0,430.4,215.074,FourCC("ntrd"))end;function CreateNeutralPassiveBuildings()local f=Player(PLAYER_NEUTRAL_PASSIVE)local g;local h;local c;local d;gg_unit_n001_0021=BlzCreateUnitWithSkin(f,FourCC("n001"),-832.0,960.0,270.000,FourCC("n001"))g=BlzCreateUnitWithSkin(f,FourCC("n000"),128.0,896.0,270.000,FourCC("n000"))gg_unit_n001_0032=BlzCreateUnitWithSkin(f,FourCC("n001"),-448.0,960.0,270.000,FourCC("n001"))gg_unit_n002_0033=BlzCreateUnitWithSkin(f,FourCC("n002"),1024.0,0.0,270.000,FourCC("n002"))gg_unit_n002_0034=BlzCreateUnitWithSkin(f,FourCC("n002"),-28670.7,26621.0,270.000,FourCC("n002"))end;function CreatePlayerBuildings()end;function CreatePlayerUnits()CreateUnitsForPlayer20()end;function CreateAllUnits()CreateNeutralPassiveBuildings()CreatePlayerBuildings()CreateNeutralHostile()CreatePlayerUnits()end;function CreateRegions()local i;gg_rct_Space=Rect(14528.0,-19520.0,29984.0,864.0)end;function Trig_Set_Actions()udg_ELEVATORS[0]=gg_unit_n001_0032;udg_ELEVATORS[1]=gg_unit_n001_0021;udg_ELEVATORS[2]=gg_unit_n002_0033;udg_ELEVATORS[3]=gg_unit_n002_0034;udg_LIGHTS[0]=gg_dest_B002_0015;udg_LIGHTS[1]=gg_dest_B002_0017;udg_LIGHTS[2]=gg_dest_B002_0019;udg_LIGHTS[3]=gg_dest_B002_0022 end;function InitTrig_Set()gg_trg_Set=CreateTrigger()TriggerAddAction(gg_trg_Set,Trig_Set_Actions)end;function InitCustomTriggers()InitTrig_Set()end;function RunInitializationTriggers()ConditionalTriggerExecute(gg_trg_Set)end;function InitCustomPlayerSlots()SetPlayerStartLocation(Player(0),0)ForcePlayerStartLocation(Player(0),0)SetPlayerColor(Player(0),ConvertPlayerColor(0))SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(0),false)SetPlayerController(Player(0),MAP_CONTROL_USER)SetPlayerStartLocation(Player(1),1)ForcePlayerStartLocation(Player(1),1)SetPlayerColor(Player(1),ConvertPlayerColor(1))SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(1),false)SetPlayerController(Player(1),MAP_CONTROL_USER)SetPlayerStartLocation(Player(2),2)ForcePlayerStartLocation(Player(2),2)SetPlayerColor(Player(2),ConvertPlayerColor(2))SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(2),false)SetPlayerController(Player(2),MAP_CONTROL_USER)SetPlayerStartLocation(Player(3),3)ForcePlayerStartLocation(Player(3),3)SetPlayerColor(Player(3),ConvertPlayerColor(3))SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(3),false)SetPlayerController(Player(3),MAP_CONTROL_USER)SetPlayerStartLocation(Player(4),4)ForcePlayerStartLocation(Player(4),4)SetPlayerColor(Player(4),ConvertPlayerColor(4))SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(4),false)SetPlayerController(Player(4),MAP_CONTROL_USER)SetPlayerStartLocation(Player(5),5)ForcePlayerStartLocation(Player(5),5)SetPlayerColor(Player(5),ConvertPlayerColor(5))SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(5),false)SetPlayerController(Player(5),MAP_CONTROL_USER)SetPlayerStartLocation(Player(6),6)ForcePlayerStartLocation(Player(6),6)SetPlayerColor(Player(6),ConvertPlayerColor(6))SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(6),false)SetPlayerController(Player(6),MAP_CONTROL_USER)SetPlayerStartLocation(Player(7),7)ForcePlayerStartLocation(Player(7),7)SetPlayerColor(Player(7),ConvertPlayerColor(7))SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(7),false)SetPlayerController(Player(7),MAP_CONTROL_USER)SetPlayerStartLocation(Player(8),8)ForcePlayerStartLocation(Player(8),8)SetPlayerColor(Player(8),ConvertPlayerColor(8))SetPlayerRacePreference(Player(8),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(8),false)SetPlayerController(Player(8),MAP_CONTROL_USER)SetPlayerStartLocation(Player(9),9)ForcePlayerStartLocation(Player(9),9)SetPlayerColor(Player(9),ConvertPlayerColor(9))SetPlayerRacePreference(Player(9),RACE_PREF_HUMAN)SetPlayerRaceSelectable(Player(9),false)SetPlayerController(Player(9),MAP_CONTROL_USER)SetPlayerStartLocation(Player(20),10)ForcePlayerStartLocation(Player(20),10)SetPlayerColor(Player(20),ConvertPlayerColor(20))SetPlayerRacePreference(Player(20),RACE_PREF_UNDEAD)SetPlayerRaceSelectable(Player(20),false)SetPlayerController(Player(20),MAP_CONTROL_COMPUTER)SetPlayerStartLocation(Player(22),11)ForcePlayerStartLocation(Player(22),11)SetPlayerColor(Player(22),ConvertPlayerColor(22))SetPlayerRacePreference(Player(22),RACE_PREF_UNDEAD)SetPlayerRaceSelectable(Player(22),false)SetPlayerController(Player(22),MAP_CONTROL_COMPUTER)SetPlayerStartLocation(Player(23),12)ForcePlayerStartLocation(Player(23),12)SetPlayerColor(Player(23),ConvertPlayerColor(23))SetPlayerRacePreference(Player(23),RACE_PREF_UNDEAD)SetPlayerRaceSelectable(Player(23),false)SetPlayerController(Player(23),MAP_CONTROL_COMPUTER)end;function InitCustomTeams()SetPlayerTeam(Player(0),0)SetPlayerTeam(Player(1),0)SetPlayerTeam(Player(2),0)SetPlayerTeam(Player(3),0)SetPlayerTeam(Player(4),0)SetPlayerTeam(Player(5),0)SetPlayerTeam(Player(6),0)SetPlayerTeam(Player(7),0)SetPlayerTeam(Player(8),0)SetPlayerTeam(Player(9),0)SetPlayerTeam(Player(22),0)SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(0),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(1),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(2),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(3),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(4),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(5),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(6),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(7),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(9),true)SetPlayerAllianceStateAllyBJ(Player(8),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(9),Player(22),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(0),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(1),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(2),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(3),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(4),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(5),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(6),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(7),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(8),true)SetPlayerAllianceStateAllyBJ(Player(22),Player(9),true)SetPlayerTeam(Player(20),1)SetPlayerTeam(Player(23),1)SetPlayerAllianceStateAllyBJ(Player(20),Player(23),true)SetPlayerAllianceStateAllyBJ(Player(23),Player(20),true)SetPlayerAllianceStateVisionBJ(Player(20),Player(23),true)SetPlayerAllianceStateVisionBJ(Player(23),Player(20),true)end;function InitAllyPriorities()SetStartLocPrioCount(0,2)SetStartLocPrio(0,0,2,MAP_LOC_PRIO_LOW)SetStartLocPrio(0,1,4,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(1,1)SetStartLocPrio(1,0,6,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(2,2)SetStartLocPrio(2,0,4,MAP_LOC_PRIO_HIGH)SetStartLocPrio(2,1,9,MAP_LOC_PRIO_LOW)SetStartLocPrioCount(3,1)SetStartLocPrio(3,0,7,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(4,1)SetStartLocPrio(4,0,2,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(5,2)SetStartLocPrio(5,0,2,MAP_LOC_PRIO_LOW)SetStartLocPrio(5,1,9,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(6,1)SetStartLocPrio(6,0,1,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(7,1)SetStartLocPrio(7,0,3,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(8,5)SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)SetStartLocPrio(8,1,2,MAP_LOC_PRIO_HIGH)SetStartLocPrio(8,2,4,MAP_LOC_PRIO_HIGH)SetStartLocPrio(8,3,5,MAP_LOC_PRIO_HIGH)SetStartLocPrio(8,4,9,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(9,2)SetStartLocPrio(9,0,2,MAP_LOC_PRIO_HIGH)SetStartLocPrio(9,1,5,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(10,10)SetStartLocPrio(10,0,1,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,1,2,MAP_LOC_PRIO_HIGH)SetStartLocPrio(10,2,3,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,3,5,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,4,6,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,5,7,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,6,8,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,7,9,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,8,11,MAP_LOC_PRIO_LOW)SetStartLocPrio(10,9,12,MAP_LOC_PRIO_HIGH)SetStartLocPrioCount(11,10)SetStartLocPrio(11,0,0,MAP_LOC_PRIO_HIGH)SetStartLocPrio(11,1,1,MAP_LOC_PRIO_LOW)SetStartLocPrio(11,2,3,MAP_LOC_PRIO_HIGH)SetStartLocPrio(11,3,5,MAP_LOC_PRIO_HIGH)SetStartLocPrio(11,4,7,MAP_LOC_PRIO_LOW)SetStartLocPrio(11,5,8,MAP_LOC_PRIO_LOW)SetStartLocPrio(11,6,9,MAP_LOC_PRIO_HIGH)SetStartLocPrio(11,7,10,MAP_LOC_PRIO_HIGH)SetStartLocPrio(11,8,12,MAP_LOC_PRIO_LOW)SetStartLocPrioCount(12,9)SetStartLocPrio(12,0,0,MAP_LOC_PRIO_LOW)SetStartLocPrio(12,1,2,MAP_LOC_PRIO_HIGH)SetStartLocPrio(12,2,3,MAP_LOC_PRIO_LOW)SetStartLocPrio(12,3,4,MAP_LOC_PRIO_HIGH)SetStartLocPrio(12,4,5,MAP_LOC_PRIO_HIGH)SetStartLocPrio(12,5,6,MAP_LOC_PRIO_LOW)SetStartLocPrio(12,6,9,MAP_LOC_PRIO_LOW)SetStartLocPrio(12,7,10,MAP_LOC_PRIO_HIGH)SetStartLocPrio(12,8,11,MAP_LOC_PRIO_LOW)end;function main()SetCameraBounds(-29952.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-30208.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),29952.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),29696.0-GetCameraMargin(CAMERA_MARGIN_TOP),-29952.0+GetCameraMargin(CAMERA_MARGIN_LEFT),29696.0-GetCameraMargin(CAMERA_MARGIN_TOP),29952.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-30208.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")NewSoundEnvironment("Default")SetAmbientDaySound("SunkenRuinsDay")SetAmbientNightSound("SunkenRuinsNight")SetMapMusic("Music",true,0)CreateRegions()CreateAllDestructables()CreateAllItems()CreateAllUnits()InitBlizzard()InitGlobals()InitCustomTriggers()RunInitializationTriggers()end;function config()SetMapName("TRIGSTR_012")SetMapDescription("TRIGSTR_014")SetPlayers(13)SetTeams(13)SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)DefineStartLocation(0,0.0,256.0)DefineStartLocation(1,21696.0,15424.0)DefineStartLocation(2,192.0,256.0)DefineStartLocation(3,-27840.0,21376.0)DefineStartLocation(4,128.0,256.0)DefineStartLocation(5,320.0,256.0)DefineStartLocation(6,19776.0,13120.0)DefineStartLocation(7,-27520.0,26176.0)DefineStartLocation(8,-3264.0,6528.0)DefineStartLocation(9,256.0,192.0)DefineStartLocation(10,-17280.0,-29056.0)DefineStartLocation(11,0.0,2560.0)DefineStartLocation(12,22336.0,28672.0)InitCustomPlayerSlots()InitCustomTeams()InitAllyPriorities()end;local j={}local k={}local l=require;local function require(m)if k[m]then return k[m]end;if j[m]then k[m]=j[m]()return k[m]else if l then return l(m)else error("module '"..m.."' not found")end end end;j={["src.app.types.vector2"]=function()require("lualib_bundle")local n={}function n.vectorFromUnit(g)return __TS__New(n.Vector2,GetUnitX(g),GetUnitY(g))end;n.Vector2=__TS__Class()local o=n.Vector2;o.name="Vector2"function o.prototype.____constructor(self,p,q)self.x=p;self.y=q end;function o.prototype.getLength(self)return math.sqrt(self.x*self.x+self.y*self.y)end;function o.prototype.normalise(self)local r=self:getLength()if r==0 then return __TS__New(n.Vector2,0,0)end;return __TS__New(n.Vector2,self.x/r,self.y/r)end;function o.prototype.applyPolarOffset(self,s,t)local u=__TS__New(n.Vector2,self.x+Cos(s*bj_DEGTORAD)*t,self.y+Sin(s*bj_DEGTORAD)*t)return u end;function o.prototype.multiply(self,v)return __TS__New(n.Vector2,self.x*v.x,self.y*v.y)end;function o.prototype.multiplyN(self,v)return __TS__New(n.Vector2,self.x*v,self.y*v)end;function o.prototype.add(self,v)return __TS__New(n.Vector2,self.x+v.x,self.y+v.y)end;function o.prototype.addN(self,v)return __TS__New(n.Vector2,self.x+v,self.y+v)end;function o.prototype.subtract(self,v)return __TS__New(n.Vector2,self.x-v.x,self.y-v.y)end;function o.prototype.subtractN(self,v)return __TS__New(n.Vector2,self.x-v,self.y-v)end;function o.prototype.setLength(self,v)if self:getLength()==0 then return __TS__New(n.Vector2,0,1):setLength(v)end;return self:normalise():multiply(v)end;function o.prototype.setLengthN(self,v)if self:getLength()==0 then return __TS__New(n.Vector2,0,1):setLengthN(v)end;return self:normalise():multiplyN(v)end;function o.prototype.__tostring(self)return"Vector2={x:"..tostring(self.x)..", y:"..tostring(self.y)..",len:"..tostring(self:getLength()).."}"end;return n end,["src.app.types.vector3"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local o=w.Vector2;n.Vector3=__TS__Class()local x=n.Vector3;x.name="Vector3"function x.prototype.____constructor(self,p,q,y)self.x=p;self.y=q;self.z=y end;function x.prototype.getLength(self)return math.sqrt(self.x*self.x+self.y*self.y+self.z*self.z)end;function x.prototype.normalise(self)local r=self:getLength()if r==0 then return __TS__New(n.Vector3,0,0,0)end;return __TS__New(n.Vector3,self.x/r,self.y/r,self.z/r)end;function x.prototype.multiply(self,v)return __TS__New(n.Vector3,self.x*v.x,self.y*v.y,self.z*v.z)end;function x.prototype.multiplyN(self,v)return __TS__New(n.Vector3,self.x*v,self.y*v,self.z*v)end;function x.prototype.add(self,v)return __TS__New(n.Vector3,self.x+v.x,self.y+v.y,self.z+v.z)end;function x.prototype.addN(self,v)return __TS__New(n.Vector3,self.x+v,self.y+v,self.z+v)end;function x.prototype.subtract(self,v)return __TS__New(n.Vector3,self.x-v.x,self.y-v.y,self.z-v.z)end;function x.prototype.subtractN(self,v)return __TS__New(n.Vector3,self.x-v,self.y-v,self.z-v)end;function x.prototype.setLength(self,v)if self:getLength()==0 then return __TS__New(n.Vector3,0,1,0):setLength(v)end;return self:normalise():multiply(v)end;function x.prototype.setLengthN(self,v)if self:getLength()==0 then return __TS__New(n.Vector3,0,1,0):setLengthN(v)end;return self:normalise():multiplyN(v)end;function x.prototype.distanceToLine(self,z,A)local B=self.x-z.x;local C=self.y-z.y;local D=A.x-z.x;local E=A.y-z.y;local F=B*D+C*E;local G=D*D+E*E;local H=-1;if G~=0 then H=F/G end;local I;local J;if H<0 then I=z.x;J=z.y elseif H>1 then I=A.x;J=A.y else I=z.x+H*D;J=z.y+H*E end;local K=self.x-I;local L=self.y-J;return math.sqrt(K*K+L*L)end;function x.prototype.projectTowards2D(self,s,t)local u=__TS__New(n.Vector3,self.x,self.y,self.z)u.x=u.x+t*Cos(s)u.y=u.y+t*Sin(s)return u end;function x.prototype.__tostring(self)return"Vector3=x:"..tostring(self.x)..", y:"..tostring(self.y)..",z:"..tostring(self.z)..",len:"..tostring(self:getLength())end;function x.prototype.to2D(self)return __TS__New(o,self.x,self.y)end;return n end,["src.lib.serilog.serilog"]=function()require("lualib_bundle")local n={}n.LogLevel={}n.LogLevel.None=-1;n.LogLevel[n.LogLevel.None]="None"n.LogLevel.Message=0;n.LogLevel[n.LogLevel.Message]="Message"n.LogLevel.Verbose=1;n.LogLevel[n.LogLevel.Verbose]="Verbose"n.LogLevel.Event=2;n.LogLevel[n.LogLevel.Event]="Event"n.LogLevel.Debug=3;n.LogLevel[n.LogLevel.Debug]="Debug"n.LogLevel.Information=4;n.LogLevel[n.LogLevel.Information]="Information"n.LogLevel.Warning=5;n.LogLevel[n.LogLevel.Warning]="Warning"n.LogLevel.Error=6;n.LogLevel[n.LogLevel.Error]="Error"n.LogLevel.Fatal=7;n.LogLevel[n.LogLevel.Fatal]="Fatal"n.LogEventType={}n.LogEventType.Text=0;n.LogEventType[n.LogEventType.Text]="Text"n.LogEventType.Parameter=1;n.LogEventType[n.LogEventType.Parameter]="Parameter"n.LogEvent=__TS__Class()local M=n.LogEvent;M.name="LogEvent"function M.prototype.____constructor(self,N,O,P)self.Type=N;self.Text=O;self.Value=P end;n.Log={}local Q=n.Log;do local R;function Q.Init(S)R=S end;local function T(U,...)local V={...}local W={}local X=string.gmatch(U,"{.-}")local Y;local Z;local _=0;local a=0;while(function()Y=X(nil)return Y end)()do do local a0,a1=string.find(U,Y,1,true)if not a0 or not a1 then goto a2 end;Z=string.sub(U,a+1,a0-1)if Z~=""then __TS__ArrayPush(W,__TS__New(n.LogEvent,n.LogEventType.Text,Z,nil))end;__TS__ArrayPush(W,__TS__New(n.LogEvent,n.LogEventType.Parameter,Y,V[_+1]))a=a1;_=_+1 end::a2::end;Z=string.sub(U,a+1)if Z~=""then __TS__ArrayPush(W,__TS__New(n.LogEvent,n.LogEventType.Text,Z,nil))end;return W end;function Q.Log(a3,U,...)local V={...}local W=T(U,table.unpack(V))do local a4=0;while a4<#R do if R[a4+1]:LogLevel()<=a3 then R[a4+1]:Log(a3,W)end;a4=a4+1 end end end;function Q.Fatal(U,...)local V={...}Q.Log(n.LogLevel.Fatal,U,table.unpack(V))end;function Q.Error(U,...)local V={...}Q.Log(n.LogLevel.Error,U,table.unpack(V))end;function Q.Warning(U,...)local V={...}Q.Log(n.LogLevel.Warning,U,table.unpack(V))end;function Q.Information(U,...)local V={...}Q.Log(n.LogLevel.Information,U,table.unpack(V))end;function Q.Debug(U,...)local V={...}Q.Log(n.LogLevel.Debug,U,table.unpack(V))end;function Q.Message(U,...)local V={...}Q.Log(n.LogLevel.Message,U,table.unpack(V))end;function Q.Event(a5,U)Q.Log(n.LogLevel.Event,"{\"event\":"..tostring(a5)..", \"data\": "..tostring(U).."}")end;function Q.Verbose(U,...)local V={...}Q.Log(n.LogLevel.Verbose,U,table.unpack(V))end end;return n end,["src.app.weapons.projectile.projectile-target"]=function()require("lualib_bundle")local n={}local a6=require("src.app.types.vector3")local x=a6.Vector3;n.ProjectileTargetStatic=__TS__Class()local a7=n.ProjectileTargetStatic;a7.name="ProjectileTargetStatic"function a7.prototype.____constructor(self,a8)self.loc=a8 end;function a7.prototype.getTargetX(self)return self.loc.x end;function a7.prototype.getTargetY(self)return self.loc.y end;function a7.prototype.getTargetZ(self)return self.loc.z end;function a7.prototype.getTargetVector(self)return __TS__New(x,self:getTargetX(),self:getTargetY(),self:getTargetZ())end;n.ProjectileTargetUnit=__TS__Class()local a9=n.ProjectileTargetUnit;a9.name="ProjectileTargetUnit"function a9.prototype.____constructor(self,aa)self.target=aa end;function a9.prototype.getTargetX(self)return GetUnitX(self.target)end;function a9.prototype.getTargetY(self)return GetUnitY(self.target)end;function a9.prototype.getTargetZ(self)return BlzGetUnitZ(self.target)end;function a9.prototype.getTargetVector(self)return __TS__New(x,self:getTargetX(),self:getTargetY(),self:getTargetZ())end;n.ProjectileMoverLinear=__TS__Class()local ab=n.ProjectileMoverLinear;ab.name="ProjectileMoverLinear"function ab.prototype.____constructor(self)end;function ab.prototype.move(self,ac,ad,ae,af)local ag=ad:normalise():multiplyN(ae*af)return ag end;local ah=800;n.ProjectileMoverParabolic=__TS__Class()local ai=n.ProjectileMoverParabolic;ai.name="ProjectileMoverParabolic"function ai.prototype.____constructor(self,aj,ad,ak)self.distanceTravelled=0;self.distanceTravelledVertically=0;self.angle=0;self.velocity=0;self.timeElapsed=0;self.originalPos=aj;self.originalDelta=ad:subtract(aj)local al=self.originalDelta:to2D():getLength()local ae=SquareRoot(al*al*ah/(al*Sin(2*ak)-2*self.originalDelta.z*Cos(ak)*Cos(ak)))self.angle=ak;self.velocity=ae end;function ai.prototype.move(self,ac,ad,ae,am)local an=self.originalDelta:normalise()local ao=self.velocity*self.timeElapsed*Cos(self.angle)local ap=ao-self.distanceTravelled;local aq=self.velocity*self.timeElapsed*Sin(self.angle)-ah*self.timeElapsed*self.timeElapsed/2;local ar=aq-self.distanceTravelledVertically;self.distanceTravelled=self.distanceTravelled+ap;self.distanceTravelledVertically=self.distanceTravelledVertically+ar;self.timeElapsed=self.timeElapsed+am;return __TS__New(x,an.x*ap,an.y*ap,0+ar)end;return n end,["src.lib.translators"]=function()require("lualib_bundle")local n={}function n.SendMessage(as)DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10,tostring(as))end;n.console=__TS__Class()local at=n.console;at.name="console"function at.prototype.____constructor(self)end;function at.log(self,au)n.SendMessage(au)end;function n.getYawPitchRollFromVector(av)return{yaw=Atan2(av.y,av.x),pitch=Asin(av.z),roll=0}end;function n.staticDecorator()return function(aw)end end;function n.SendMessageUnlogged(as)DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10,tostring(as))end;function n.PlayNewSoundOnUnit(ax,ay,az)local u=CreateSound(ax,false,true,true,10,10,"")SetSoundDuration(u,GetSoundFileDuration(ax))SetSoundChannel(u,0)SetSoundVolume(u,az)SetSoundPitch(u,1)SetSoundDistances(u,2000,10000)SetSoundDistanceCutoff(u,4500)AttachSoundToUnit(u,ay)StartSound(u)KillSoundWhenDone(u)return u end;function n.ToString(au)return tostring(au)end;function n.DecodeFourCC(aA)return string.char(aA>>24&255,aA>>16&255,aA>>8&255,aA&255)end;n.Util=__TS__Class()local aB=n.Util;aB.name="Util"function aB.prototype.____constructor(self)end;function aB.isUnitCreep(self,g)local aC=GetPlayerId(GetOwningPlayer(g))local aD=aC;if aD==n.COLOUR.NAVY then goto aE end;if aD==n.COLOUR.TURQUOISE then goto aF end;if aD==n.COLOUR.VOILET then goto aG end;if aD==n.COLOUR.WHEAT then goto aH end;goto aI::aE::::aF::::aG::::aH::do return true end::aI::do return false end::aJ::end;function aB.ColourString(self,aK,aL)return"|cFF"..tostring(aK)..tostring(aL).."|r"end;function aB.RandomInt(self,aM,aN)return math.floor(math.random()*(aN-aM+1))+aM end;function aB.ShuffleArray(self,aO)do local a=#aO-1;while a>0 do local aP=math.floor(math.random()*(a+1))local aQ=aO[a+1]aO[a+1]=aO[aP+1]aO[aP+1]=aQ;a=a-1 end end end;function aB.RandomHash(self,aR)local u=""local aS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"local aT=#aS;do local a=0;while a<aR do u=tostring(u)..tostring(string.sub(aS,math.floor(math.random()*aT)+1,math.floor(math.random()*aT)+1))a=a+1 end end;return u end;function aB.GetRandomKey(self,aU)local a4=math.floor(math.random()*aU.size)local aV=0;for aW in __TS__Iterator(aU:keys())do if(function()local aX=aV;aV=aX+1;return aX end)()==a4 then return aW end end end;function aB.GetAllKeys(self,aU)local aY={}for aW in __TS__Iterator(aU:keys())do __TS__ArrayPush(aY,aW)end;return aY end;function aB.ArraysToString(self,aO)local aZ="["do local a=0;while a<#aO do do if a==#aO-1 then aZ=tostring(aZ).."\""..tostring(aO[a+1]).."\""goto a_ end;aZ=tostring(aZ).."\""..tostring(aO[a+1]).."\", "end::a_::a=a+1 end end;aZ=tostring(aZ).."]"return aZ end;function aB.ParseInt(self,aL)return aL end;function aB.ParsePositiveInt(self,aL)local b0=__TS__Number(aL)if b0<0 then return 0 end;return b0 end;function aB.Round(self,p)return math.floor(p+0.5-(p+0.5)%1)end;aB.COLOUR_IDS={RED=0,BLUE=1,TEAL=2,PURPLE=3,YELLOW=4,ORANGE=5,GREEN=6,PINK=7,GRAY=8,GREY=8,LIGHT_BLUE=9,LIGHTBLUE=9,LB=9,DARK_GREEN=10,DARKGREEN=10,DG=10,BROWN=11,MAROON=12,NAVY=13,TURQUOISE=14,VOILET=15,WHEAT=16,PEACH=17,MINT=18,LAVENDER=19,COAL=20,SNOW=21,EMERALD=22,PEANUT=23}n.COLOUR={}n.COLOUR.RED=0;n.COLOUR[n.COLOUR.RED]="RED"n.COLOUR.BLUE=1;n.COLOUR[n.COLOUR.BLUE]="BLUE"n.COLOUR.TEAL=2;n.COLOUR[n.COLOUR.TEAL]="TEAL"n.COLOUR.PURPLE=3;n.COLOUR[n.COLOUR.PURPLE]="PURPLE"n.COLOUR.YELLOW=4;n.COLOUR[n.COLOUR.YELLOW]="YELLOW"n.COLOUR.ORANGE=5;n.COLOUR[n.COLOUR.ORANGE]="ORANGE"n.COLOUR.GREEN=6;n.COLOUR[n.COLOUR.GREEN]="GREEN"n.COLOUR.PINK=7;n.COLOUR[n.COLOUR.PINK]="PINK"n.COLOUR.GRAY=8;n.COLOUR[n.COLOUR.GRAY]="GRAY"n.COLOUR.LIGHT_BLUE=9;n.COLOUR[n.COLOUR.LIGHT_BLUE]="LIGHT_BLUE"n.COLOUR.DARK_GREEN=10;n.COLOUR[n.COLOUR.DARK_GREEN]="DARK_GREEN"n.COLOUR.BROWN=11;n.COLOUR[n.COLOUR.BROWN]="BROWN"n.COLOUR.MAROON=12;n.COLOUR[n.COLOUR.MAROON]="MAROON"n.COLOUR.NAVY=13;n.COLOUR[n.COLOUR.NAVY]="NAVY"n.COLOUR.TURQUOISE=14;n.COLOUR[n.COLOUR.TURQUOISE]="TURQUOISE"n.COLOUR.VOILET=15;n.COLOUR[n.COLOUR.VOILET]="VOILET"n.COLOUR.WHEAT=16;n.COLOUR[n.COLOUR.WHEAT]="WHEAT"n.COLOUR.PEACH=17;n.COLOUR[n.COLOUR.PEACH]="PEACH"n.COLOUR.MINT=18;n.COLOUR[n.COLOUR.MINT]="MINT"n.COLOUR.LAVENDER=19;n.COLOUR[n.COLOUR.LAVENDER]="LAVENDER"n.COLOUR.COAL=20;n.COLOUR[n.COLOUR.COAL]="COAL"n.COLOUR.SNOW=21;n.COLOUR[n.COLOUR.SNOW]="SNOW"n.COLOUR.EMERALD=22;n.COLOUR[n.COLOUR.EMERALD]="EMERALD"n.COLOUR.PEANUT=23;n.COLOUR[n.COLOUR.PEANUT]="PEANUT"n.CREEP_TYPE={}n.CREEP_TYPE.NORMAL=0;n.CREEP_TYPE[n.CREEP_TYPE.NORMAL]="NORMAL"n.CREEP_TYPE.AIR=1;n.CREEP_TYPE[n.CREEP_TYPE.AIR]="AIR"n.CREEP_TYPE.CHAMPION=2;n.CREEP_TYPE[n.CREEP_TYPE.CHAMPION]="CHAMPION"n.CREEP_TYPE.BOSS=3;n.CREEP_TYPE[n.CREEP_TYPE.BOSS]="BOSS"n.ARMOUR_TYPE={}n.ARMOUR_TYPE.UNARMOURED=0;n.ARMOUR_TYPE[n.ARMOUR_TYPE.UNARMOURED]="UNARMOURED"n.ARMOUR_TYPE.LIGHT=1;n.ARMOUR_TYPE[n.ARMOUR_TYPE.LIGHT]="LIGHT"n.ARMOUR_TYPE.MEDIUM=2;n.ARMOUR_TYPE[n.ARMOUR_TYPE.MEDIUM]="MEDIUM"n.ARMOUR_TYPE.HEAVY=3;n.ARMOUR_TYPE[n.ARMOUR_TYPE.HEAVY]="HEAVY"n.ARMOUR_TYPE.FORTIFIED=4;n.ARMOUR_TYPE[n.ARMOUR_TYPE.FORTIFIED]="FORTIFIED"n.ARMOUR_TYPE.HERO=5;n.ARMOUR_TYPE[n.ARMOUR_TYPE.HERO]="HERO"return n end,["src.app.weapons.projectile.projectile-sfx"]=function()require("lualib_bundle")local n={}local b1=require("src.lib.translators")local b2=b1.getYawPitchRollFromVector;n.ProjectileSFX=__TS__Class()local b3=n.ProjectileSFX;b3.name="ProjectileSFX"function b3.prototype.____constructor(self,b4,b5,t,b6)self.offset=t;local b7=b2(b6)self.yaw=b7.yaw;self.pitch=b7.pitch;self.roll=b7.roll;self.sfx=AddSpecialEffect(b4,b5.x,b5.y)BlzSetSpecialEffectZ(self.sfx,b5.z)BlzSetSpecialEffectRoll(self.sfx,self.pitch)BlzSetSpecialEffectYaw(self.sfx,self.yaw)end;function b3.prototype.updatePosition(self,b8)BlzSetSpecialEffectX(self.sfx,b8.x+self.offset.x)BlzSetSpecialEffectY(self.sfx,b8.y+self.offset.y)BlzSetSpecialEffectZ(self.sfx,b8.z+self.offset.z)end;function b3.prototype.setScale(self,b9)BlzSetSpecialEffectScale(self.sfx,b9)end;function b3.prototype.destroy(self)DestroyEffect(self.sfx)end;function b3.prototype.getEffect(self)return self.sfx end;return n end,["src.app.weapons.projectile.projectile"]=function()require("lualib_bundle")local n={}local ba=require("src.app.weapons.projectile.projectile-target")local ab=ba.ProjectileMoverLinear;local bb=require("src.app.weapons.projectile.projectile-sfx")local b3=bb.ProjectileSFX;local bc=FourCC("A00C")local bd;bd=function(be)return Filter(function()local ay=GetFilterUnit()return GetWidgetLife(ay)>0.405 and not IsUnitAlly(ay,GetOwningPlayer(be.source))and IsUnitType(ay,UNIT_TYPE_STRUCTURE)==false and IsUnitType(ay,UNIT_TYPE_MAGIC_IMMUNE)==false and IsUnitType(ay,UNIT_TYPE_MECHANICAL)==false and GetUnitAbilityLevel(ay,bc)==0 end)end;n.Projectile=__TS__Class()local bf=n.Projectile;bf.name="Projectile"function bf.prototype.____constructor(self,bg,bh,aa,bi)self.collisionRadius=30;self.velocity=10;self.doDestroy=false;self.position=bh;self.target=aa;self.sfx={}self.mover=bi or __TS__New(ab)self.source=bg;self.filter=bd(self)end;function bf.prototype.addEffect(self,b4,t,b6,b9)local bj=__TS__New(b3,b4,self.position,t,b6)bj:setScale(b9)__TS__ArrayPush(self.sfx,bj)return bj:getEffect()end;function bf.prototype.doesCollide(self)return true end;function bf.prototype.getPosition(self)return self.position end;function bf.prototype.getCollisionRadius(self)return self.collisionRadius end;function bf.prototype.setCollisionRadius(self,bk)self.collisionRadius=bk;return self end;function bf.prototype.willDestroy(self)return self.doDestroy end;function bf.prototype.setDestroy(self,bl)self.doDestroy=bl;return self end;function bf.prototype.overrideFilter(self,bm)self.filter=Filter(bm)return self end;function bf.prototype.onCollide(self,bn)self.onCollideCallback=bn;return self end;function bf.prototype.onDeath(self,bn)self.onDeathCallback=bn;return self end;function bf.prototype.collide(self,bo,bp)if self.onCollideCallback then self:onCollideCallback(bo,self,bp)end end;function bf.prototype.getTarget(self)return self.target end;function bf.prototype.update(self,bo,am)local bq=self.mover:move(self.position,self:getTarget():getTargetVector(),self.velocity,am)local br=self.position:add(bq)self.position=br;__TS__ArrayForEach(self.sfx,function(bs,b4)return b4:updatePosition(self.position)end)if self:reachedEnd(bo,bq)then self.doDestroy=true end;return bq end;function bf.prototype.setVelocity(self,ae)self.velocity=ae;return self end;function bf.prototype.reachedEnd(self,bo,bt)MoveLocation(bo.game.TEMP_LOCATION,self.position.x,self.position.y)local y=GetLocationZ(bo.game.TEMP_LOCATION)return self.position.z<=y end;function bf.prototype.destroy(self)local bs=self.onDeathCallback and self:onDeathCallback(self)__TS__ArrayForEach(self.sfx,function(bs,b4)return b4:destroy()end)self.sfx={}return true end;return n end,["src.app.types.jass-overrides.trigger"]=function()require("lualib_bundle")local n={}n.Trigger=__TS__Class()local bu=n.Trigger;bu.name="Trigger"function bu.prototype.____constructor(self)self.isDestroyed=false;self.nativeTrigger=CreateTrigger()end;function bu.EvaluateCondition(self,bv)local bw=false;xpcall(function()bw=bv()end,function(bx)self:printError(bx)end)return bw end;function bu.printError(self,bx)print("FATAL ERROR")print(bx)end;function bu.prototype.AddAction(self,by)return TriggerAddAction(self.nativeTrigger,function()return{xpcall(function()return by()end,function(bx)return n.Trigger:printError(bx)end)}end)end;function bu.prototype.RegisterTimerEvent(self,bz,bA)return TriggerRegisterTimerEvent(self.nativeTrigger,bz,bA)end;function bu.prototype.RegisterTimerEventSingle(self,bz)return TriggerRegisterTimerEventSingle(self.nativeTrigger,bz)end;function bu.prototype.RegisterTimerEventPeriodic(self,bz)return TriggerRegisterTimerEventPeriodic(self.nativeTrigger,bz)end;function bu.prototype.RegisterPlayerStateEvent(self,bB,bC,bD,bE)return TriggerRegisterPlayerStateEvent(self.nativeTrigger,bB,bC,bD,bE)end;function bu.prototype.RegisterUnitTakesDamage(self)return TriggerRegisterAnyUnitEventBJ(self.nativeTrigger,EVENT_PLAYER_UNIT_DAMAGED)end;function bu.prototype.RegisterDeathEvent(self,bF)return TriggerRegisterDeathEvent(self.nativeTrigger,bF)end;function bu.prototype.RegisterDialogEventBJ(self,bG)return TriggerRegisterDialogEventBJ(self.nativeTrigger,bG)end;function bu.prototype.RegisterEnterRectSimple(self,bH)return TriggerRegisterEnterRectSimple(self.nativeTrigger,bH)end;function bu.prototype.AddCondition(self,bv)return TriggerAddCondition(self.nativeTrigger,Condition(function()return n.Trigger:EvaluateCondition(bv)end))end;function bu.prototype.AddFilterFuncCondition(self,bI)return TriggerAddCondition(self.nativeTrigger,bI)end;function bu.prototype.RegisterAnyUnitEventBJ(self,bJ)TriggerRegisterAnyUnitEventBJ(self.nativeTrigger,bJ)end;function bu.prototype.RegisterPlayerChatEvent(self,bB,bK,bL)return TriggerRegisterPlayerChatEvent(self.nativeTrigger,bB,bK,bL)end;function bu.prototype.RegisterPlayerUnitEventSimple(self,bB,bJ)return TriggerRegisterPlayerUnitEventSimple(self.nativeTrigger,bB,bJ)end;function bu.prototype.RegisterUnitIssuedOrder(self,bM,bJ)return TriggerRegisterUnitEvent(self.nativeTrigger,bM,bJ)end;function bu.prototype.destroy(self)self.isDestroyed=true;DestroyTrigger(self.nativeTrigger)end;return n end,["src.app.types.timed-event-queue"]=function()require("lualib_bundle")local n={}local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local b1=require("src.lib.translators")local aB=b1.Util;n.TimedEventQueue=__TS__Class()local bO=n.TimedEventQueue;bO.name="TimedEventQueue"function bO.prototype.____constructor(self,bP)self.tick=0;self.maxTick=100000;self.events=__TS__New(Map)self.tickRate=0.05;self.ticker=__TS__New(bu)self.ticker:RegisterTimerEventPeriodic(self.tickRate)self.ticker:AddAction(function()self.tick=(self.tick+1)%self.maxTick;self:HandleTick()end)self.game=bP end;function bO.prototype.HandleTick(self)self.events:forEach(function(bs,bQ,aW)if bQ:AttemptAction(self.tick,self)then self.events:delete(aW)end end)end;function bO.prototype.AddEvent(self,bQ)local bR=aB:RandomHash(10)bQ:setTickRate(1000*self.tickRate)self.events:set(bR,bQ)return bR end;function bO.prototype.RemoveEvent(self,bS)if self.events:has(bS)then self.events:delete(bS)end end;function bO.prototype.GetEvent(self,bS)if self.events:has(bS)then return self.events:get(bS)end end;function bO.prototype.GetEventExpireTime(self,bQ)return bQ:GetEndTick()*self.tickRate end;function bO.prototype.GetGame(self)return self.game end;return n end,["src.app.types.timed-event"]=function()require("lualib_bundle")local n={}n.TimedEvent=__TS__Class()local bT=n.TimedEvent;bT.name="TimedEvent"function bT.prototype.____constructor(self,bv,bU,bV)if bV==nil then bV=true end;self.safe=bV;self.time=bU;self.func=function()return bv()end end;function bT.prototype.setTickRate(self,bW)self.time=self.time/bW end;function bT.prototype.AttemptAction(self,bX,bY)if not self.endtime then self.endtime=(bX+self.time)%100000-1;if self.endtime<0 then self.endtime=0 end end;if self.endtime<=bX then self:func()return true end;return false end;function bT.prototype.GetEndTick(self)return self.endtime or 1 end;return n end,["src.resources.colours"]=function()local n={}n.COL_GOOD="|cff00ff00"n.COL_BAD="|cff808080"n.COL_ATTATCH="|cffc81e1e"n.COL_MISC="|cff808080"n.COL_INFO="|cff00ffff"n.COL_RESOLVE="|cffffff00"n.COL_GOLD="|cffffcc00"n.COL_FLOOR_1="|cfff5a742"n.COL_FLOOR_2="|cff41dee0"n.COL_VENTS="|cff666633"return n end,["src.resources.weapon-tooltips"]=function()local n={}local bZ=require("src.resources.colours")local b_=bZ.COL_ATTATCH;local c0=bZ.COL_GOOD;local c1=bZ.COL_INFO;local c2=bZ.COL_GOLD;n.BURST_RIFLE_EXTENDED=function(c3,c4,c5)return"|cff808080Powered by galvanic rails, this old rifle has been in active circulation since the Yulvin succession wars. \nNow many corporations produce upgrades and attachments that further improve upon its baseline functionality.|r\n\nFires a short burst of six bullets with |cff00ffff"..tostring(c4).."|r to |cff00ffff"..tostring(c5).."|r range, with each bullet dealing |cff00ff00"..tostring(c3).." damage|r.\n\n|cffff0000If all six rounds hit the same target, this weapon will apply BREAK.|r\n"end;n.BURST_RIFLE_ITEM=function(c6,c3)return"|cff808080Powered by galvanic rails, this old rifle has been in active circulation since the Yulvin succession wars. \nNow many corporations produce upgrades and attachments that further improve upon its baseline functionality.|r\n\nAttached: "..tostring(c6.attachment and tostring(c2)..tostring(c6.attachment.name)or tostring(b_).."Nothing").."|r\n\nThe standard issue rifle; ideal for thinning hordes and can dish out serious damage up close.\n"..tostring(c0).."- 6 Shot Burst\n- Each shot does "..tostring(c3).." damage\n- Short Cooldown|r\n\n"..tostring(not c6.attachment and tostring(c1).."Can be enhanced with "..tostring(b_).."High Quality Polymer|r"..tostring(c1).." and |r"..tostring(b_).."EMS Rifling|r"..tostring(c1)..".|r"or tostring(c2).."Equip and type -u to remove "..tostring(b_)..tostring(c6.attachment.name).."|r|r")end;return n end,["src.app.weapons.attachment.attachment"]=function()require("lualib_bundle")local n={}local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;n.Attachment=__TS__Class()local c8=n.Attachment;c8.name="Attachment"function c8.prototype.____constructor(self,c9)self.name=""self.item=c9;self.itemId=GetItemTypeId(c9)end;function c8.prototype.attachTo(self,c6)local ca=self:onAttach(c6)if ca then if c6.equippedTo then local cb=c7("Sounds\\attachToGun.mp3",c6.equippedTo.unit,50)end;local cc=c6:attach(self)if cc then local bs=self.item and RemoveItem(self.item)self.item=nil;self.attachedTo=c6 end;return cc end;return false end;function c8.prototype.unattach(self)self:onDeattach()if self.attachedTo and self.attachedTo.equippedTo then local ay=self.attachedTo.equippedTo.unit;local cd=UnitInventoryCount(ay)<UnitInventorySize(ay)local ce=CreateItem(self.itemId,GetUnitX(ay),GetUnitY(ay))if cd then UnitAddItem(ay,ce)end end;self.attachedTo=nil end;return n end,["src.app.weapons.guns.unit-has-weapon"]=function()require("lualib_bundle")local n={}n.ArmableUnit=__TS__Class()local cf=n.ArmableUnit;cf.name="ArmableUnit"function cf.prototype.____constructor(self,ay)self.unit=ay end;return n end,["src.app.weapons.weapon-constants"]=function()local n={}n.BURST_RIFLE_ABILITY_ID=FourCC("A002")n.BURST_RIFLE_ITEM_ID=FourCC("I000")n.SNIPER_ABILITY_ID=FourCC("A005")n.SNIPER_ITEM_ID=FourCC("I001")n.EMS_RIFLING_ABILITY_ID=FourCC("A00A")n.EMS_RIFLING_ITEM_ID=FourCC("I003")n.HIGH_QUALITY_POLYMER_ABILITY_ID=FourCC("A009")n.HIGH_QUALITY_POLYMER_ITEM_ID=FourCC("I002")return n end,["src.app.weapons.guns.burst-rifle"]=function()require("lualib_bundle")local n={}local a6=require("src.app.types.vector3")local x=a6.Vector3;local cg=require("src.app.weapons.guns.gun")local ch=cg.Gun;local ci=require("src.app.weapons.projectile.projectile")local bf=ci.Projectile;local ba=require("src.app.weapons.projectile.projectile-target")local a7=ba.ProjectileTargetStatic;local cj=require("src.app.types.timed-event")local bT=cj.TimedEvent;local w=require("src.app.types.vector2")local o=w.Vector2;local ck=require("src.resources.weapon-tooltips")local cl=ck.BURST_RIFLE_EXTENDED;local cm=ck.BURST_RIFLE_ITEM;local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;local cn=require("src.app.weapons.weapon-constants")local co=cn.BURST_RIFLE_ABILITY_ID;local cp=cn.BURST_RIFLE_ITEM_ID;n.InitBurstRifle=function(bo)__TS__ArrayPush(bo.weaponItemIds,cp)__TS__ArrayPush(bo.weaponAbilityIds,co)end;n.BurstRifle=__TS__Class()local cq=n.BurstRifle;cq.name="BurstRifle"cq.____super=ch;setmetatable(cq,cq.____super)setmetatable(cq.prototype,cq.____super.prototype)function cq.prototype.____constructor(self,c9,cr)ch.prototype.____constructor(self,c9,cr)self.DEFAULT_STRAY=240;self.SHOT_DISTANCE=1200 end;function cq.prototype.onShoot(self,bo,cs,ct)ch.prototype.onShoot(self,bo,cs,ct)local ay=cs.unit;local cb=c7("Sounds\\BattleRifleShoot.mp3",cs.unit,50)local cu=__TS__New(x,GetUnitX(ay),GetUnitY(ay),BlzGetUnitZ(ay)+50):projectTowards2D(GetUnitFacing(ay)*bj_DEGTORAD,30)local cv=__TS__New(o,ct.x-cu.x,ct.y-cu.y):normalise():multiplyN(self.SHOT_DISTANCE)local cw=__TS__New(x,cv.x+cu.x,cv.y+cu.y,ct.z)local cx=0;do local a=0;while a<5 do bo.game.timedEventQueue:AddEvent(__TS__New(bT,function()self:fireProjectile(bo,cs,cw)return true end,cx,false))cx=cx+50;a=a+1 end end end;function cq.prototype.fireProjectile(self,bo,cs,ct)local ay=cs.unit;local cu=__TS__New(x,GetUnitX(ay),GetUnitY(ay),BlzGetUnitZ(ay)+50):projectTowards2D(GetUnitFacing(ay)*bj_DEGTORAD,30)local cy=self:getStrayLocation(ct,cs)local cz=cy:subtract(cu)local be=__TS__New(bf,ay,cu,__TS__New(a7,cz))be:addEffect("war3mapImported\\Bullet.mdx",__TS__New(x,0,0,0),cz:normalise(),1.6)be:setVelocity(2400):onCollide(function(cA,bo,be,cB)return self:onProjectileCollide(bo,be,cB)end)bo:addProjectile(be)end;function cq.prototype.onProjectileCollide(self,bo,be,cB)be:setDestroy(true)if self.equippedTo then local cC=bo.game.crewModule:getCrewmemberForUnit(self.equippedTo.unit)if cC then UnitDamageTarget(be.source,cB,self:getDamage(bo,cC),false,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WOOD_MEDIUM_STAB)end end end;function cq.prototype.getTooltip(self,bo,cC)local cD=self.DEFAULT_STRAY*100/cC:getAccuracy()/2;local cE=cl(self:getDamage(bo,cC),self.SHOT_DISTANCE-cD,self.SHOT_DISTANCE+cD)return cE end;function cq.prototype.getItemTooltip(self,bo,cC)local c3=self:getDamage(bo,cC)return cm(self,c3)end;function cq.prototype.getStrayLocation(self,cF,cs)local cG=cs:getAccuracy()local cH=__TS__New(x,cF.x+(math.random()-0.5)*self.DEFAULT_STRAY*100/cG,cF.y+(math.random()-0.5)*self.DEFAULT_STRAY*100/cG,cF.z)return cH end;function cq.prototype.getDamage(self,bo,cs)if self.attachment and self.attachment.name=="Ems Rifling"then return 20 end;return 15 end;function cq.prototype.getAbilityId(self)return co end;function cq.prototype.getItemId(self)return cp end;return n end,["src.app.weapons.guns.sniper-rifle"]=function()require("lualib_bundle")local n={}local a6=require("src.app.types.vector3")local x=a6.Vector3;local cg=require("src.app.weapons.guns.gun")local ch=cg.Gun;local ci=require("src.app.weapons.projectile.projectile")local bf=ci.Projectile;local ba=require("src.app.weapons.projectile.projectile-target")local a7=ba.ProjectileTargetStatic;local cj=require("src.app.types.timed-event")local bT=cj.TimedEvent;local w=require("src.app.types.vector2")local o=w.Vector2;local ck=require("src.resources.weapon-tooltips")local cl=ck.BURST_RIFLE_EXTENDED;local cm=ck.BURST_RIFLE_ITEM;local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;local b2=b1.getYawPitchRollFromVector;local cn=require("src.app.weapons.weapon-constants")local cI=cn.SNIPER_ITEM_ID;local cJ=cn.SNIPER_ABILITY_ID;n.InitSniperRifle=function(bo)__TS__ArrayPush(bo.weaponItemIds,cI)__TS__ArrayPush(bo.weaponAbilityIds,cJ)end;n.SniperRifle=__TS__Class()local cK=n.SniperRifle;cK.name="SniperRifle"cK.____super=ch;setmetatable(cK,cK.____super)setmetatable(cK.prototype,cK.____super.prototype)function cK.prototype.____constructor(self,c9,cr)ch.prototype.____constructor(self,c9,cr)self.DEFAULT_STRAY=30;self.SHOT_DISTANCE=1600 end;function cK.prototype.getTooltip(self,bo,cC)local cD=self.DEFAULT_STRAY*100/cC:getAccuracy()/2;local cE=cl(self:getDamage(bo,cC),self.SHOT_DISTANCE-cD,self.SHOT_DISTANCE+cD)return""end;function cK.prototype.getItemTooltip(self,bo,cC)return cm(self,self:getDamage(bo,cC))end;function cK.prototype.onShoot(self,bo,cs,ct)ch.prototype.onShoot(self,bo,cs,ct)local ay=cs.unit;local cu=__TS__New(x,GetUnitX(ay),GetUnitY(ay),BlzGetUnitZ(ay)+50):projectTowards2D(GetUnitFacing(ay)*bj_DEGTORAD,30)local cv=__TS__New(o,ct.x-cu.x,ct.y-cu.y):normalise():multiplyN(self.SHOT_DISTANCE)local cw=__TS__New(x,cv.x+cu.x,cv.y+cu.y,ct.z)self:fireProjectile(bo,cs,cw)end;function cK.prototype.fireProjectile(self,bo,cs,ct)local ay=cs.unit;local cb=c7("Sounds\\SniperRifleShoot.mp3",cs.unit,50)local cu=__TS__New(x,GetUnitX(ay),GetUnitY(ay),BlzGetUnitZ(ay)+50):projectTowards2D(GetUnitFacing(ay)*bj_DEGTORAD,30)local cy=self:getStrayLocation(ct,cs)local cz=cy:subtract(cu)local be=__TS__New(bf,ay,cu,__TS__New(a7,cz))local cL=be:addEffect("war3mapImported\\Bullet.mdx",__TS__New(x,0,0,0),cz:normalise(),2.5)BlzSetSpecialEffectColor(cL,130,160,255)be:setCollisionRadius(40):setVelocity(2400):onCollide(function(cA,bo,be,cB)return self:onProjectileCollide(bo,be,cB)end)bo:addProjectile(be)local cx=0;while cx<1000 do bo.game.timedEventQueue:AddEvent(__TS__New(bT,function()if not be or be:willDestroy()then return true end;local cM=be:getPosition():add(cz:normalise())local cN=b2(cz:normalise())local b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cM.x,cM.y)BlzSetSpecialEffectHeight(b4,cM.z)BlzSetSpecialEffectYaw(b4,cN.yaw+90*bj_DEGTORAD)BlzSetSpecialEffectRoll(b4,cN.pitch+90*bj_DEGTORAD)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.7)BlzSetSpecialEffectTimeScale(b4,1)BlzSetSpecialEffectTime(b4,0.5)DestroyEffect(b4)return true end,cx,false))cx=cx+100 end end;function cK.prototype.onProjectileCollide(self,bo,be,cB)be:setDestroy(true)if self.equippedTo then local cC=bo.game.crewModule:getCrewmemberForUnit(self.equippedTo.unit)if cC then local c3=self:getDamage(bo,cC)UnitDamageTarget(be.source,cB,c3,false,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WOOD_MEDIUM_STAB)end end end;function cK.prototype.getStrayLocation(self,cF,cs)local cG=cs:getAccuracy()local cH=__TS__New(x,cF.x+(math.random()-0.5)*self.DEFAULT_STRAY*100/cG,cF.y+(math.random()-0.5)*self.DEFAULT_STRAY*100/cG,cF.z)return cH end;function cK.prototype.getDamage(self,bo,cs)return 120 end;function cK.prototype.getAbilityId(self)return cJ end;function cK.prototype.getItemId(self)return cI end;return n end,["src.app.weapons.attachment.high-quality-polymer"]=function()require("lualib_bundle")local n={}local cO=require("src.app.weapons.attachment.attachment")local c8=cO.Attachment;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local cn=require("src.app.weapons.weapon-constants")local co=cn.BURST_RIFLE_ABILITY_ID;local cQ=cn.HIGH_QUALITY_POLYMER_ABILITY_ID;n.HighQualityPolymer=__TS__Class()local cR=n.HighQualityPolymer;cR.name="HighQualityPolymer"cR.____super=c8;setmetatable(cR,cR.____super)setmetatable(cR.prototype,cR.____super.prototype)function cR.prototype.____constructor(self,...)c8.prototype.____constructor(self,...)self.name="High Quality Polymer"end;function cR.prototype.onAttach(self,c6)if c6:getAbilityId()==co then if c6.equippedTo then UnitAddAbility(c6.equippedTo.unit,cQ)end;return true end;return false end;function cR.prototype.onDeattach(self)if self.attachedTo and self.attachedTo.equippedTo then UnitRemoveAbility(self.attachedTo.equippedTo.unit,cQ)end end;function cR.prototype.onEquip(self,c6)Q.Information("Re-equiping gun with hqp attachment")if c6 and c6.equippedTo then UnitAddAbility(c6.equippedTo.unit,cQ)end end;function cR.prototype.onUnequip(self,c6)Q.Information("Unequiping gun with hqp attachment")if c6 and c6.equippedTo then UnitRemoveAbility(c6.equippedTo.unit,cQ)end end;return n end,["src.app.weapons.attachment.em-rifling"]=function()require("lualib_bundle")local n={}local cO=require("src.app.weapons.attachment.attachment")local c8=cO.Attachment;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local cn=require("src.app.weapons.weapon-constants")local co=cn.BURST_RIFLE_ABILITY_ID;local cS=cn.EMS_RIFLING_ABILITY_ID;n.EmsRifling=__TS__Class()local cT=n.EmsRifling;cT.name="EmsRifling"cT.____super=c8;setmetatable(cT,cT.____super)setmetatable(cT.prototype,cT.____super.prototype)function cT.prototype.____constructor(self,...)c8.prototype.____constructor(self,...)self.name="Ems Rifling"end;function cT.prototype.onAttach(self,c6)if c6:getAbilityId()==co then if c6.equippedTo then UnitAddAbility(c6.equippedTo.unit,cS)end;return true end;return false end;function cT.prototype.onDeattach(self)if self.attachedTo and self.attachedTo.equippedTo then UnitRemoveAbility(self.attachedTo.equippedTo.unit,cS)end end;function cT.prototype.onEquip(self,c6)Q.Information("Re-equiping gun with hqp attachment")if c6 and c6.equippedTo then UnitAddAbility(c6.equippedTo.unit,cS)end end;function cT.prototype.onUnequip(self,c6)Q.Information("Unequiping gun with hqp attachment")if c6 and c6.equippedTo then UnitRemoveAbility(c6.equippedTo.unit,cS)end end;return n end,["src.app.weapons.weapon-module"]=function()require("lualib_bundle")local n={}local a6=require("src.app.types.vector3")local x=a6.Vector3;local cU=require("src.app.weapons.guns.burst-rifle")local cq=cU.BurstRifle;local cV=cU.InitBurstRifle;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local cW=require("src.app.weapons.guns.sniper-rifle")local cK=cW.SniperRifle;local cX=cW.InitSniperRifle;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local cY=require("src.app.weapons.attachment.high-quality-polymer")local cR=cY.HighQualityPolymer;local cZ=require("src.app.weapons.attachment.em-rifling")local cT=cZ.EmsRifling;local cn=require("src.app.weapons.weapon-constants")local cI=cn.SNIPER_ITEM_ID;local cp=cn.BURST_RIFLE_ITEM_ID;local c_=cn.HIGH_QUALITY_POLYMER_ITEM_ID;local d0=cn.EMS_RIFLING_ITEM_ID;n.WeaponModule=__TS__Class()local d1=n.WeaponModule;d1.name="WeaponModule"function d1.prototype.____constructor(self,bP)self.weaponItemIds={}self.weaponAbilityIds={}self.guns={}self.projectiles={}self.projectileUpdateTimer=__TS__New(bu)self.collisionCheckGroup=CreateGroup()self.equipWeaponAbilityId=FourCC("A004")self.weaponEquipTrigger=__TS__New(bu)self.weaponShootTrigger=__TS__New(bu)self.weaponDropTrigger=__TS__New(bu)self.weaponPickupTrigger=__TS__New(bu)self.game=bP;cV(self)cX(self)self:initialiseWeaponEquip()self:initaliseWeaponShooting()self:initialiseWeaponDropPickup()self:initProjectiles()end;function d1.prototype.initProjectiles(self)local d2=0.03;self.projectileUpdateTimer:RegisterTimerEventPeriodic(d2)self.projectileUpdateTimer:AddAction(function()return self:updateProjectiles(d2)end)end;function d1.prototype.updateProjectiles(self,d3)self.projectiles=__TS__ArrayFilter(self.projectiles,function(bs,be)local bh=be:getPosition()local af=be:update(self,d3)if be:doesCollide()then local d4=be:getPosition()self:checkCollisionsForProjectile(be,bh,d4,af)end;if be:willDestroy()then return not be:destroy()end;return true end)end;function d1.prototype.checkCollisionsForProjectile(self,be,d5,d6,af)if not be.filter then return end;GroupClear(self.collisionCheckGroup)local d7=d5:add(d6):multiplyN(0.5)local d8=af:getLength()+be:getCollisionRadius()GroupEnumUnitsInRange(self.collisionCheckGroup,d7.x,d7.y,d8,be.filter)ForGroup(self.collisionCheckGroup,function()local ay=GetEnumUnit()local d9=__TS__New(x,GetUnitX(ay),GetUnitY(ay),0)local da=d9:distanceToLine(d5,d6)if da<be:getCollisionRadius()+BlzGetUnitCollisionSize(ay)then be:collide(self,ay)end end)end;function d1.prototype.addProjectile(self,be)__TS__ArrayPush(self.projectiles,be)end;function d1.prototype.getGunForItem(self,c9)for bs,db in ipairs(self.guns)do if db.item==c9 then return db end end;return nil end;function d1.prototype.getGunForUnit(self,ay)for bs,db in ipairs(self.guns)do if db.equippedTo and db.equippedTo.unit==ay then return db end end end;function d1.prototype.initialiseWeaponEquip(self)self.weaponEquipTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_SPELL_EFFECT)self.weaponEquipTrigger:AddCondition(function()local dc=GetSpellAbilityId()return dc==self.equipWeaponAbilityId end)self.weaponEquipTrigger:AddAction(function()local ay=GetTriggerUnit()local dd=GetUnitCurrentOrder(ay)local de=dd-852008;local c9=UnitItemInSlot(ay,de)local cC=self.game.crewModule:getCrewmemberForUnit(ay)if cC then self:applyItemEquip(cC,c9)end end)end;function d1.prototype.applyItemEquip(self,ay,c9)local df=GetItemTypeId(c9)local dg=self:itemIsWeapon(df)local dh=self:itemIsAttachment(df)if dg then local di=self:getGunForUnit(ay.unit)local dj=self:getGunForItem(c9)or self:createWeaponForId(c9,ay)if di then di:onRemove(self)end;if dj then __TS__ArrayPush(self.guns,dj)dj:onAdd(self,ay)end elseif dh then if ay.weapon then local dk=self:createAttachmentForId(c9)if dk then dk:attachTo(ay.weapon)ay.weapon:updateTooltip(self,ay)end end else Q.Warning("Warning, item "..tostring(df).." is being attached but is not attachment or weapon")end end;function d1.prototype.initaliseWeaponShooting(self)self.weaponShootTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_SPELL_EFFECT)self.weaponShootTrigger:AddCondition(function()return __TS__ArrayIndexOf(self.weaponAbilityIds,GetSpellAbilityId())>=0 end)self.weaponShootTrigger:AddAction(function()local ay=GetTriggerUnit()local ct=GetSpellTargetLoc()local dl=__TS__New(x,GetLocationX(ct),GetLocationY(ct),GetLocationZ(ct))local cC=self.game.crewModule:getCrewmemberForUnit(ay)local c6=self:getGunForUnit(ay)if c6 and cC then local dm=GetSpellTargetUnit()if dm then self.game.forceModule:aggressionBetweenTwoPlayers(GetOwningPlayer(ay),GetOwningPlayer(dm))end;c6:onShoot(self,cC,dl)end;RemoveLocation(ct)end)end;function d1.prototype.initialiseWeaponDropPickup(self)self.weaponDropTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_DROP_ITEM)self.weaponDropTrigger:AddCondition(function()local db=self:getGunForItem(GetManipulatedItem())if db then db:onRemove(self)end;return false end)self.weaponPickupTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_PICKUP_ITEM)self.weaponPickupTrigger:AddCondition(function()local db=self:getGunForItem(GetManipulatedItem())local cC=self.game.crewModule and self.game.crewModule:getCrewmemberForUnit(GetManipulatingUnit())if db and cC then db:updateTooltip(self,cC)end;return false end)end;function d1.prototype.itemIsWeapon(self,df)if df==cI then return true end;if df==cp then return true end;return false end;function d1.prototype.itemIsAttachment(self,df)if df==c_ then return true end;if df==d0 then return true end;return false end;function d1.prototype.createWeaponForId(self,c9,ay)local df=GetItemTypeId(c9)if df==cI then return __TS__New(cK,c9,ay)elseif df==cp then return __TS__New(cq,c9,ay)end;return nil end;function d1.prototype.createAttachmentForId(self,c9)local df=GetItemTypeId(c9)if df==c_ then return __TS__New(cR,c9)end;if df==d0 then return __TS__New(cT,c9)end;return nil end;return n end,["src.app.weapons.guns.gun"]=function()require("lualib_bundle")local n={}local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;n.Gun=__TS__Class()local ch=n.Gun;ch.name="Gun"function ch.prototype.____constructor(self,c9,cr)self.name="default"self.item=c9;self.equippedTo=cr end;function ch.prototype.onAdd(self,bo,cs)self.equippedTo=cs;self.equippedTo:onWeaponAdd(bo,self)UnitAddAbility(cs.unit,self:getAbilityId())self:updateTooltip(bo,cs)local cb=c7("Sounds\\attachToGun.mp3",cs.unit,50)if self.attachment then self.attachment:onEquip(self)end;if self.remainingCooldown and self.remainingCooldown>0 then print("Reforged better add a way to set cooldowns remaining")end end;function ch.prototype.onRemove(self,bo)if self.equippedTo then UnitRemoveAbility(self.equippedTo.unit,self:getAbilityId())self.remainingCooldown=BlzGetUnitAbilityCooldownRemaining(self.equippedTo.unit,self:getAbilityId())self.equippedTo:onWeaponRemove(bo,self)if self.attachment then self.attachment:onUnequip(self)end;self.equippedTo=nil end end;function ch.prototype.updateTooltip(self,bo,cs)local dn=self:getItemTooltip(bo,cs)BlzSetItemExtendedTooltip(self.item,dn)if self.equippedTo then local dp=GetOwningPlayer(self.equippedTo.unit)local cE=self:getTooltip(bo,cs)if GetLocalPlayer()==dp then BlzSetAbilityExtendedTooltip(self:getAbilityId(),cE,0)end end end;function ch.prototype.onShoot(self,bo,cs,ct)self.remainingCooldown=bo.game:getTimeStamp()end;function ch.prototype.attach(self,dk)if self.attachment then self:detach()end;self.attachment=dk;return true end;function ch.prototype.detach(self)if self.attachment then self.attachment:unattach()self.attachment=nil end end;return n end,["src.app.buff.buff-instance"]=function()require("lualib_bundle")local n={}n.BuffInstance=__TS__Class()local dq=n.BuffInstance;dq.name="BuffInstance"function dq.prototype.____constructor(self)end;n.BuffInstanceDuration=__TS__Class()local dr=n.BuffInstanceDuration;dr.name="BuffInstanceDuration"dr.____super=n.BuffInstance;setmetatable(dr,dr.____super)setmetatable(dr.prototype,dr.____super.prototype)function dr.prototype.____constructor(self,ds,dt)dr.____super.prototype.____constructor(self)self.endTimestamp=ds+dt end;function dr.prototype.isActive(self,du)return self.endTimestamp>du end;n.BuffInstanceCallback=__TS__Class()local dv=n.BuffInstanceCallback;dv.name="BuffInstanceCallback"dv.____super=n.BuffInstance;setmetatable(dv,dv.____super)setmetatable(dv.prototype,dv.____super.prototype)function dv.prototype.____constructor(self,dw)dv.____super.prototype.____constructor(self)self.cb=function()return dw()end end;function dv.prototype.isActive(self,du)return self:cb()end;n.DynamicBuff=__TS__Class()local dx=n.DynamicBuff;dx.name="DynamicBuff"function dx.prototype.____constructor(self)self.isActive=false;self.instances={}self.onChangeCallbacks={}end;function dx.prototype.addInstance(self,bP,cC,dy)local dz=self.isActive;self.isActive=true;__TS__ArrayPush(self.instances,dy)if dz~=self.isActive then __TS__ArrayForEach(self.onChangeCallbacks,function(bs,dw)return dw(self)end)self:onStatusChange(bP,true)end end;function dx.prototype.process(self,bP,af)local dA=bP:getTimeStamp()local dz=#self.instances>0;self.instances=__TS__ArrayFilter(self.instances,function(bs,a)return a:isActive(dA)end)local dB=#self.instances>0;if dz~=dB then self.isActive=false;self:onStatusChange(bP,false)end;return dB end;function dx.prototype.onChange(self,dw)__TS__ArrayPush(self.onChangeCallbacks,dw)end;function dx.prototype.getIsActive(self)return self.isActive end;return n end,["src.app.types.sound-ref"]=function()require("lualib_bundle")local n={}n.SoundRef=__TS__Class()local dC=n.SoundRef;dC.name="SoundRef"function dC.prototype.____constructor(self,cb,dD)self.sound=CreateSound(cb,dD,false,false,0,3,"")end;function dC.prototype.playSound(self)StartSound(self.sound)end;function dC.prototype.setVolume(self,az)SetSoundVolume(self.sound,az)end;function dC.prototype.stopSound(self)StopSound(self.sound,false,true)end;n.SoundWithCooldown=__TS__Class()local dE=n.SoundWithCooldown;dE.name="SoundWithCooldown"dE.____super=n.SoundRef;setmetatable(dE,dE.____super)setmetatable(dE.prototype,dE.____super.prototype)function dE.prototype.____constructor(self,dF,cb)dE.____super.prototype.____constructor(self,cb,false)self.cooldown=dF end;function dE.prototype.canPlaySound(self,dG)local dH=not self.timePlayed or dG-self.timePlayed>self.cooldown;if dH then self.timePlayed=dG;return true end;return false end;return n end,["src.app.buff.resolve"]=function()require("lualib_bundle")local n={}local dI=require("src.app.buff.buff-instance")local dx=dI.DynamicBuff;local dJ=require("src.app.types.sound-ref")local dE=dJ.SoundWithCooldown;local dC=dJ.SoundRef;local dK=FourCC("A008")local dL=FourCC("B001")n.Resolve=__TS__Class()local dM=n.Resolve;dM.name="Resolve"dM.____super=dx;setmetatable(dM,dM.____super)setmetatable(dM.prototype,dM.____super.prototype)function dM.prototype.____constructor(self,bP,cC)dx.prototype.____constructor(self)self.breathSound=__TS__New(dE,10,"Sounds\\HeavyBreath.mp3")self.resolveMusic=__TS__New(dC,"Music\\KavinskyRampage.mp3",true)self.crewmember=cC end;function dM.prototype.onStatusChange(self,bP,dN)if dN then self.resolveMusic:setVolume(15)if GetLocalPlayer()==self.crewmember.player then StopMusic(true)self.breathSound:playSound()self.resolveMusic:playSound()end;if not UnitHasBuffBJ(self.crewmember.unit,dL)then bP:useDummyFor(function(cA,dO)SetUnitX(dO,GetUnitX(self.crewmember.unit))SetUnitY(dO,GetUnitY(self.crewmember.unit)+50)IssueTargetOrder(dO,"bloodlust",self.crewmember.unit)end,dK)end else UnitRemoveBuffBJ(dL,self.crewmember.unit)__TS__ArrayForEach(self.onChangeCallbacks,function(bs,dw)return dw(self)end)if GetLocalPlayer()==self.crewmember.player then self.breathSound:stopSound()self.resolveMusic:stopSound()ResumeMusic()end end end;return n end,["src.app.buff.despair"]=function()require("lualib_bundle")local n={}local dI=require("src.app.buff.buff-instance")local dx=dI.DynamicBuff;local dJ=require("src.app.types.sound-ref")local dE=dJ.SoundWithCooldown;local dC=dJ.SoundRef;local dP=FourCC("A00D")local dQ=FourCC("B004")n.Despair=__TS__Class()local dR=n.Despair;dR.name="Despair"dR.____super=dx;setmetatable(dR,dR.____super)setmetatable(dR.prototype,dR.____super.prototype)function dR.prototype.____constructor(self,bP,cC)dx.prototype.____constructor(self)self.jumpScareSound=__TS__New(dE,10,"Sounds\\HeavyBreath.mp3")self.despairMusic=__TS__New(dC,"Music\\FlightIntoTheUnkown.mp3",true)self.despairMusic:setVolume(127)self.crewmember=cC;self.prevUnitHealth=GetUnitState(self.crewmember.unit,UNIT_STATE_LIFE)end;function dR.prototype.process(self,bP,af)local u=dx.prototype.process(self,bP,af)local dS=GetUnitState(self.crewmember.unit,UNIT_STATE_LIFE)local dT=dS-self.prevUnitHealth;if dT>0 then SetUnitState(self.crewmember.unit,UNIT_STATE_LIFE,dS-dT/2)end;return u end;function dR.prototype.onStatusChange(self,bP,dN)if dN then self.despairMusic:setVolume(127)if GetLocalPlayer()==self.crewmember.player then StopMusic(true)self.despairMusic:playSound()self.jumpScareSound:playSound()end;if not UnitHasBuffBJ(self.crewmember.unit,dQ)then bP:useDummyFor(function(cA,dO)SetUnitX(dO,GetUnitX(self.crewmember.unit))SetUnitY(dO,GetUnitY(self.crewmember.unit)+50)IssueTargetOrder(dO,"faeriefire",self.crewmember.unit)end,dP)end else UnitRemoveBuffBJ(dQ,self.crewmember.unit)__TS__ArrayForEach(self.onChangeCallbacks,function(bs,dw)return dw(self)end)if GetLocalPlayer()==self.crewmember.player then self.despairMusic:stopSound()self.jumpScareSound:stopSound()ResumeMusic()end end end;return n end,["src.app.crewmember.crewmember-type"]=function()require("lualib_bundle")local n={}local dU=require("src.app.buff.resolve")local dM=dU.Resolve;local dV=require("src.app.weapons.guns.unit-has-weapon")local cf=dV.ArmableUnit;local dW=require("src.app.buff.despair")local dR=dW.Despair;local dI=require("src.app.buff.buff-instance")local dv=dI.BuffInstanceCallback;n.Crewmember=__TS__Class()local dX=n.Crewmember;dX.name="Crewmember"dX.____super=cf;setmetatable(dX,dX.____super)setmetatable(dX.prototype,dX.____super.prototype)function dX.prototype.____constructor(self,bP,dY,ay)cf.prototype.____constructor(self,ay)self.role=""self.name=""self.baseAccuracy=100;self.player=dY;self.unit=ay;self.resolve=__TS__New(dM,bP,self)self.despair=__TS__New(dR,bP,self)self.resolve:onChange(function()return self.weapon and self.weapon:updateTooltip(bP.weaponModule,self)end)self.despair:onChange(function()return self.weapon and self.weapon:updateTooltip(bP.weaponModule,self)end)end;function dX.prototype.setUnit(self,ay)self.unit=ay end;function dX.prototype.setRole(self,dZ)self.role=dZ end;function dX.prototype.setName(self,d_)self.name=d_ end;function dX.prototype.setPlayer(self,dY)self.player=dY end;function dX.prototype.onWeaponAdd(self,bo,e0)self.weapon=e0 end;function dX.prototype.onWeaponRemove(self,bo,e0)self.weapon=nil end;function dX.prototype.onDamage(self,bP)local e1=self.resolve:getIsActive()local e2=BlzGetUnitMaxHP(self.unit)local e3=(GetUnitState(self.unit,UNIT_STATE_LIFE)-GetEventDamage())*0.7/e2;local bs=GetUnitLifePercent;if not e1 and e3<=0.3 then self.resolve:addInstance(bP,self,__TS__New(dv,function()return GetUnitLifePercent(self.unit)<=30 end))end;if e1 then BlzSetEventDamage(GetEventDamage()*0.7)end end;function dX.prototype.getAccuracy(self)local e4=0;if self.resolve:getIsActive()then e4=e4+10 end;if self.despair:getIsActive()then e4=e4-75 end;return self.baseAccuracy+e4 end;function dX.prototype.addDespair(self,bP,dy)self.despair:addInstance(bP,self,dy)end;function dX.prototype.testResolve(self,bP)SetUnitLifePercentBJ(self.unit,0.2)self.resolve:addInstance(bP,self,__TS__New(dv,function()return GetUnitLifePercent(self.unit)<=30 end))end;function dX.prototype.log(self)print("+++ Crewmember Information +++")print("Who: "..tostring(self.name))print("Position: "..tostring(self.role))end;return n end,["src.app.crewmember.crewmember-names"]=function()local n={}n.ROLE_NAMES={Captain={"Captain Keene","Captain Kirk","Captain Jack Sparrow","Captain Creed","Captain Coloma","Captain Dallas","Captain Cutter","Captain Reynolds","Captain Willard","Captain Fodder","Captain Cookie"},Navigator={"Admiral Ackbar","Admiral Doubt","Admiral Hansel","Admiral Gretel","Admiral Jones","Admiral Aedus","Admiral Alex"},["Security Guard"]={"Pvt Clarke","Pvt. \"Slick\" Jones","Col. Kaedin","Sly Marbo","Pvt. Frost","Pvt. Riley","Pvt. Blake","Pvt. Vasquez","Pvt. Allen","Pvt. Jenkins","Pvt. Summers","Pvt. Pyle","Pvt. Harding","Pvt. Hudson","Cpl. Baker","Cpl. Hicks","Cpl. Emerich","Cpl. Dilan","Cpl. Collins","Cpl. Duncan"}}return n end,["src.app.force.force-type"]=function()require("lualib_bundle")local n={}n.ForceType=__TS__Class()local e5=n.ForceType;e5.name="ForceType"function e5.prototype.____constructor(self)self.players={}end;function e5.prototype.is(self,d_)return self.name==d_ end;function e5.prototype.hasPlayer(self,e6)return __TS__ArrayIndexOf(self.players,e6)>=0 end;function e5.prototype.addPlayer(self,e6)__TS__ArrayPush(self.players,e6)end;function e5.prototype.removePlayer(self,e6)local e7=__TS__ArrayIndexOf(self.players,e6)if e7>=0 then __TS__ArraySplice(self.players,e7,1)end end;return n end,["src.app.force.alien-force"]=function()require("lualib_bundle")local n={}local e8=require("src.app.force.force-type")local e5=e8.ForceType;n.ALIEN_FORCE_NAME="ALIEN"n.AlienForce=__TS__Class()local e9=n.AlienForce;e9.name="AlienForce"e9.____super=e5;setmetatable(e9,e9.____super)setmetatable(e9.prototype,e9.____super.prototype)function e9.prototype.____constructor(self,...)e5.prototype.____constructor(self,...)self.name=n.ALIEN_FORCE_NAME end;function e9.prototype.setHost(self,e6)self.alienHost=e6 end;function e9.prototype.getHost(self)return self.alienHost end;function e9.prototype.checkVictoryConditions(self,ea)return#self.players>0 end;return n end,["src.app.force.observer-force"]=function()require("lualib_bundle")local n={}local e8=require("src.app.force.force-type")local e5=e8.ForceType;n.OBSERVER_FORCE_NAME="OBS"n.ObserverForce=__TS__Class()local eb=n.ObserverForce;eb.name="ObserverForce"eb.____super=e5;setmetatable(eb,eb.____super)setmetatable(eb.prototype,eb.____super.prototype)function eb.prototype.____constructor(self,...)e5.prototype.____constructor(self,...)self.name=n.OBSERVER_FORCE_NAME end;function eb.prototype.checkVictoryConditions(self,ea)return false end;return n end,["src.app.force.force-module"]=function()require("lualib_bundle")local n={}local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local ec=require("src.app.force.crewmember-force")local ed=ec.CrewmemberForce;local ee=require("src.app.force.observer-force")local eb=ee.ObserverForce;n.ForceModule=__TS__Class()local ef=n.ForceModule;ef.name="ForceModule"function ef.prototype.____constructor(self,bP)self.forces={}__TS__ArrayPush(self.forces,__TS__New(ed))__TS__ArrayPush(self.forces,__TS__New(eb))self.neutralPassive=Player(22)self.neutralHostile=Player(23)end;function ef.prototype.aggressionBetweenTwoPlayers(self,eg,eh)Q.Information("Player aggression between "..tostring(GetPlayerName(eg)).." and "..tostring(GetPlayerName(eh)))SetPlayerAllianceStateAllyBJ(eg,eh,false)SetPlayerAllianceStateAllyBJ(eh,eg,false)end;function ef.prototype.checkVictoryConditions(self)local ei=__TS__ArrayFilter(self.forces,function(bs,ej)return ej:checkVictoryConditions(self)end)return#ei==1 and ei[1]or nil end;function ef.prototype.getActivePlayers(self)local u={}do local a=0;while a<GetBJMaxPlayerSlots()do local ek=Player(a)local el=GetPlayerSlotState(ek)==PLAYER_SLOT_STATE_PLAYING;local em=GetPlayerController(ek)==MAP_CONTROL_USER;if el and em then __TS__ArrayPush(u,Player(a))end;a=a+1 end end;return u end;function ef.prototype.getForce(self,en)return __TS__ArrayFilter(self.forces,function(bs,ej)return ej:is(en)end)[1]end;return n end,["src.app.force.crewmember-force"]=function()require("lualib_bundle")local n={}local e8=require("src.app.force.force-type")local e5=e8.ForceType;n.CREW_FORCE_NAME="CREW"n.CrewmemberForce=__TS__Class()local ed=n.CrewmemberForce;ed.name="CrewmemberForce"ed.____super=e5;setmetatable(ed,ed.____super)setmetatable(ed.prototype,ed.____super.prototype)function ed.prototype.____constructor(self,...)e5.prototype.____constructor(self,...)self.name=n.CREW_FORCE_NAME end;function ed.prototype.checkVictoryConditions(self,ea)return#self.players>0 end;return n end,["src.app.world.zone-id"]=function()local n={}n.ZONE_TYPE={}n.ZONE_TYPE.FLOOR_1=0;n.ZONE_TYPE[n.ZONE_TYPE.FLOOR_1]="FLOOR_1"n.ZONE_TYPE.FLOOR_2=1;n.ZONE_TYPE[n.ZONE_TYPE.FLOOR_2]="FLOOR_2"n.ZONE_TYPE.FLOOR_3=2;n.ZONE_TYPE[n.ZONE_TYPE.FLOOR_3]="FLOOR_3"n.ZONE_TYPE.VENTRATION=3;n.ZONE_TYPE[n.ZONE_TYPE.VENTRATION]="VENTRATION"return n end,["src.app.crewmember.crewmember-module"]=function()require("lualib_bundle")local n={}local eo=require("src.app.crewmember.crewmember-type")local dX=eo.Crewmember;local ep=require("src.app.crewmember.crewmember-names")local eq=ep.ROLE_NAMES;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local cn=require("src.app.weapons.weapon-constants")local cp=cn.BURST_RIFLE_ITEM_ID;local ec=require("src.app.force.crewmember-force")local er=ec.CREW_FORCE_NAME;local es=require("src.app.world.zone-id")local et=es.ZONE_TYPE;local eu=FourCC("H001")local ev=0.25;n.CrewModule=__TS__Class()local ew=n.CrewModule;ew.name="CrewModule"function ew.prototype.____constructor(self,bP)self.CREW_MEMBERS={}self.AVAILABLE_ROLES={}self.game=bP;local ex=bP.forceModule:getActivePlayers()local ey=bP.forceModule:getForce(er)self:initialiseRoles(ex)__TS__ArrayForEach(ex,function(bs,dY)local ez=self:createCrew(bP,GetPlayerId(dY))__TS__ArrayPush(self.CREW_MEMBERS,ez)local bs=ey and ey:addPlayer(dY)bP.worldModule:travel(ez.unit,et.FLOOR_1)end)self.crewmemberDamageTrigger=__TS__New(bu)self.crewmemberDamageTrigger:RegisterUnitTakesDamage()self.crewmemberDamageTrigger:AddCondition(function()local dY=GetOwningPlayer(GetTriggerUnit())return GetPlayerId(dY)<=22 end)self.crewmemberDamageTrigger:AddAction(function()local ay=GetTriggerUnit()local ez=self:getCrewmemberForUnit(ay)if ez then ez:onDamage(bP)end end)local eA=__TS__New(bu)eA:RegisterTimerEventPeriodic(ev)eA:AddAction(function()return self:processCrew(ev)end)end;function ew.prototype.initialiseRoles(self,eB)__TS__ArrayForEach(eB,function(bs,f,a4)if a4==0 then __TS__ArrayPush(self.AVAILABLE_ROLES,"Captain")else __TS__ArrayPush(self.AVAILABLE_ROLES,"Security Guard")end end)end;function ew.prototype.processCrew(self,bU)__TS__ArrayForEach(self.CREW_MEMBERS,function(bs,ez)ez.resolve:process(self.game,bU)ez.despair:process(self.game,bU)end)end;function ew.prototype.createCrew(self,bP,eC)local eD=Player(eC)local eE=CreateUnit(eD,eu,0,0,bj_UNIT_FACING)local cC=__TS__New(dX,bP,eD,eE)cC:setRole(self:getCrewmemberRole())cC:setName(self:getCrewmemberName(cC.role))cC:setPlayer(eD)BlzShowUnitTeamGlow(cC.unit,false)BlzSetUnitName(eE,cC.role)BlzSetHeroProperName(eE,cC.name)Q.Information("Created Crewmember "..tostring(cC.name).."::"..tostring(cC.role))if cC.role then local c9=CreateItem(cp,0,0)UnitAddItem(cC.unit,c9)bP.weaponModule:applyItemEquip(cC,c9)end;bP.worldModule:travel(cC.unit,et.FLOOR_1)return cC end;function ew.prototype.getCrewmemberRole(self)local a=math.floor(math.random()*#self.AVAILABLE_ROLES)local dZ=self.AVAILABLE_ROLES[a+1]__TS__ArraySplice(self.AVAILABLE_ROLES,a,1)return dZ end;function ew.prototype.getCrewmemberName(self,dZ)local eF;if dZ=="Captain"then eF=eq.Captain else eF=eq["Security Guard"]end;local a=math.floor(math.random()*#eF)local d_=eF[a+1]__TS__ArraySplice(eF,a,1)return d_ end;function ew.prototype.getCrewmemberForPlayer(self,dY)for bs,eG in ipairs(self.CREW_MEMBERS)do if eG.player==dY then return eG end end end;function ew.prototype.getCrewmemberForUnit(self,ay)for bs,eG in ipairs(self.CREW_MEMBERS)do if eG.unit==ay then return eG end end end;return n end,["src.app.space.ship"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local o=w.Vector2;n.Ship=__TS__Class()local eH=n.Ship;eH.name="Ship"function eH.prototype.____constructor(self,eI,eJ)self.mass=1;self.acceleration=200;self.accelerationBackwards=25;self.velocity=0;self.velocityForwardMax=1200;self.velocityBackwardsMax=500;self.isMovingBackwards=false;self.isGoingToStop=false;self.position=__TS__New(o,eI,eJ)self.momentum=__TS__New(o,0,0)self.thrust=__TS__New(o,0,0)end;function eH.prototype.updateThrust(self,am)if self.unit then local eK=GetUnitFacing(self.unit)if self.isGoingToStop then local eL=self.isMovingBackwards and self.acceleration or self.accelerationBackwards;if self.velocity<eL then self.velocity=0;self.isGoingToStop=false else self.velocity=self.velocity-eL end end;local eM=__TS__New(o,Cos(eK*bj_DEGTORAD),Sin(eK*bj_DEGTORAD))self.momentum=eM:multiplyN(self.velocity)if self.isMovingBackwards then self.momentum=__TS__New(o,-self.momentum.x,-self.momentum.y)end end;return self end;function eH.prototype.applyThrust(self,am)local eN=self.isMovingBackwards and self.velocityForwardMax or self.velocityBackwardsMax;self.momentum=self.momentum:add(self.thrust:multiplyN(am))local aR=self.momentum:getLength()if aR>eN then self.momentum:setLengthN(eN)end;return self end;function eH.prototype.updatePosition(self,am,eO)self.position=self.position:add(self.momentum:multiplyN(am))if eO then self.position=self.position:subtract(eO)end;if self.unit then SetUnitX(self.unit,self.position.x)SetUnitY(self.unit,self.position.y)end;return self end;function eH.prototype.increaseVelocity(self)self.isGoingToStop=false;if self.isMovingBackwards then self.velocity=self.velocity-self.acceleration;if self.velocity<0 then self.isMovingBackwards=false;self.velocity=self.acceleration+self.velocity end else self.velocity=self.velocity+self.acceleration end;self:applyVelocityCap()return self end;function eH.prototype.decreaseVelocity(self)self.isGoingToStop=false;if not self.isMovingBackwards then self.velocity=self.velocity-self.accelerationBackwards;if self.velocity<0 then self.isMovingBackwards=true;self.velocity=self.accelerationBackwards+self.velocity end else self.velocity=self.velocity+self.accelerationBackwards end;self:applyVelocityCap()return self end;function eH.prototype.applyVelocityCap(self)if self.isMovingBackwards then if self.velocity>self.velocityBackwardsMax then self.velocity=self.velocityBackwardsMax end else if self.velocity>self.velocityForwardMax then self.velocity=self.velocityForwardMax end end end;function eH.prototype.goToAStop(self)self.isGoingToStop=true;return self end;function eH.prototype.getMomentum(self)return self.momentum end;function eH.prototype.getPosition(self)return self.position end;function eH.prototype.setPosition(self,eP)self.position=eP end;return n end,["src.app.space.space-objects.space-object"]=function()require("lualib_bundle")local n={}n.SpaceObject=__TS__Class()local eQ=n.SpaceObject;eQ.name="SpaceObject"function eQ.prototype.____constructor(self,eR)self.loaded=false;self.position=eR end;function eQ.prototype.updateLocation(self,af)self.position=self.position:subtract(af)return self end;function eQ.prototype.getLocation(self)return self.position end;function eQ.prototype.insideRect(self,eS,eT,eU,eV)local eP=self.position;return eP.x>eS and eP.x<eU and eP.y>eT and eP.y<eV end;function eQ.prototype.isLoaded(self)return self.loaded end;function eQ.prototype.load(self,bP)self.loaded=true end;function eQ.prototype.offload(self)self.loaded=false end;return n end,["src.app.space.space-objects.asteroid"]=function()require("lualib_bundle")local n={}local eW=require("src.app.space.space-objects.space-object")local eQ=eW.SpaceObject;local w=require("src.app.types.vector2")local o=w.Vector2;n.ASTEROID_UNIT_ID=FourCC("h002")n.Asteroid=__TS__Class()local eX=n.Asteroid;eX.name="Asteroid"eX.____super=eQ;setmetatable(eX,eX.____super)setmetatable(eX.prototype,eX.____super.prototype)function eX.prototype.____constructor(self,eY,eZ)eQ.prototype.____constructor(self,__TS__New(o,eY,eZ))end;function eX.prototype.load(self,bP)eQ.prototype.load(self,bP)local eR=self:getLocation()self.unit=CreateUnit(bP.forceModule.neutralPassive,n.ASTEROID_UNIT_ID,eR.x,eR.y,bj_UNIT_FACING)SetUnitTimeScale(self.unit,0.1)SetUnitScalePercent(self.unit,GetRandomReal(50,300),GetRandomReal(50,300),GetRandomReal(50,300))SetUnitFacing(self.unit,GetRandomReal(0,360))end;function eX.prototype.onUpdate(self)if self.unit then local a8=self:getLocation()SetUnitX(self.unit,a8.x)SetUnitY(self.unit,a8.y)end end;function eX.prototype.offload(self)eQ.prototype.offload(self)if self.unit then RemoveUnit(self.unit)end end;function eX.prototype.pickle(self)end;return n end,["src.app.space.space-module"]=function()require("lualib_bundle")local n={}local e_=require("src.app.space.ship")local eH=e_.Ship;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local f0=require("src.app.space.space-objects.asteroid")local eX=f0.Asteroid;n.SpaceModule=__TS__Class()local f1=n.SpaceModule;f1.name="SpaceModule"function f1.prototype.____constructor(self,bP)self.spaceRect=gg_rct_Space;self.shipUpdateTimer=__TS__New(bu)self.shipAbilityTrigger=__TS__New(bu)self.shipAccelAbilityId=FourCC("A001")self.shipDeaccelAbilityId=FourCC("A000")self.shipStopAbilityId=FourCC("A006")self.game=bP;self.ships={}self.spaceObjects={}local f2=GetRectCenterX(self.spaceRect)local f3=GetRectCenterY(self.spaceRect)self.mainShip=__TS__New(eH,f2,f3)self.mainShip.unit=CreateUnit(Player(0),FourCC("h003"),f2,f3,bj_UNIT_FACING)self:createTestShip()local a=0;while a<400 do a=a+1;self:createTestAsteroid()end;self:initShips()self:initShipAbilities()end;function f1.prototype.createTestShip(self)local f4=FourCC("h000")local f2=GetRectCenterX(self.spaceRect)local f3=GetRectCenterY(self.spaceRect)local f5=__TS__New(eH,f2,f3)f5.unit=CreateUnit(Player(0),f4,f2,f3,bj_UNIT_FACING)__TS__ArrayPush(self.ships,f5)end;function f1.prototype.createTestAsteroid(self)if not self.mainShip.unit then return end;local p=GetUnitX(self.mainShip.unit)+GetRandomReal(-5000,5000)local q=GetUnitY(self.mainShip.unit)+GetRandomReal(-5000,5000)local f6=__TS__New(eX,p,q)__TS__ArrayPush(self.spaceObjects,f6)f6:load(self.game)end;function f1.prototype.initShips(self)local f7=0.03;self.shipUpdateTimer:RegisterTimerEventPeriodic(f7)self.shipUpdateTimer:AddAction(function()return self:updateShips(f7)end)end;function f1.prototype.updateShips(self,f8)self.mainShip:updateThrust(f8)self.mainShip:applyThrust(f8)local f9=self.mainShip:getPosition()local fa=self.mainShip:getMomentum():multiplyN(f8)__TS__ArrayForEach(self.spaceObjects,function(bs,fb)return fb:updateLocation(fa):onUpdate()end)__TS__ArrayForEach(self.ships,function(bs,f5)f5:updateThrust(f8):applyThrust(f8):updatePosition(f8,fa)end)end;function f1.prototype.getShipForUnit(self,ay)if ay==self.mainShip.unit then return self.mainShip end;for bs,f5 in ipairs(self.ships)do if f5.unit==ay then return f5 end end end;function f1.prototype.initShipAbilities(self)self.shipAbilityTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_SPELL_EFFECT)self.shipAbilityTrigger:AddCondition(function()return GetSpellAbilityId()==self.shipAccelAbilityId or GetSpellAbilityId()==self.shipDeaccelAbilityId or GetSpellAbilityId()==self.shipStopAbilityId end)self.shipAbilityTrigger:AddAction(function()local ay=GetTriggerUnit()local fc=GetSpellAbilityId()local f5=self:getShipForUnit(ay)if f5 and fc==self.shipAccelAbilityId then f5:increaseVelocity()elseif f5 and fc==self.shipDeaccelAbilityId then f5:decreaseVelocity()elseif f5 then f5:goToAStop()end end)end;return n end,["src.app.types.game-time-elapsed"]=function()require("lualib_bundle")local n={}n.GameTimeElapsed=__TS__Class()local fd=n.GameTimeElapsed;fd.name="GameTimeElapsed"function fd.prototype.____constructor(self)self.everyTenSeconds=0;self.globalTimer=CreateTimer()TimerStart(self.globalTimer,10000,false,function()return self:incrementTimer()end)end;function fd.prototype.incrementTimer(self)self.everyTenSeconds=self.everyTenSeconds+1;TimerStart(self.globalTimer,10000,false,function()return self:incrementTimer()end)end;function fd.prototype.getTimeElapsed(self)return self.everyTenSeconds*10+TimerGetElapsed(self.globalTimer)end;return n end,["src.app.shops.gene-modules"]=function()require("lualib_bundle")local n={}n.GeneModule=__TS__Class()local fe=n.GeneModule;fe.name="GeneModule"function fe.prototype.____constructor(self,bP)end;return n end,["src.app.abilities.ability-type"]=function()local n={}return n end,["src.app.abilities.human.roll-sprint"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local ff=w.vectorFromUnit;local cn=require("src.app.weapons.weapon-constants")local cQ=cn.HIGH_QUALITY_POLYMER_ABILITY_ID;local fg=330;local fh=0.3;n.RollWhenSprinting=__TS__Class()local fi=n.RollWhenSprinting;fi.name="RollWhenSprinting"function fi.prototype.____constructor(self)self.timeElapsed=0 end;function fi.prototype.initialise(self,fj)self.unit=GetTriggerUnit()local fk=ff(self.unit)local fl=GetUnitAbilityLevel(self.unit,cQ)>0 and 1.3 or 1;local fm=fk:applyPolarOffset(GetUnitFacing(self.unit),fg*fl)self.direction=fm:subtract(fk):normalise():multiplyN(fg*fl/fh)return true end;function fi.prototype.process(self,fj,af)self.timeElapsed=self.timeElapsed+af;if self.direction and self.unit then local br=ff(self.unit):add(self.direction:multiplyN(af))SetUnitX(self.unit,br.x)SetUnitY(self.unit,br.y)end;return self.timeElapsed<=fh end;function fi.prototype.destroy(self,fj)return false end;return n end,["src.resources.filters"]=function()local n={}n.FilterIsEnemyAndAlive=function(fn)return Filter(function()local fo=GetFilterUnit()return IsPlayerEnemy(GetOwningPlayer(fo),fn)and not BlzIsUnitInvulnerable(fo)end)end;return n end,["src.app.abilities.alien.acid-pool"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local ff=w.vectorFromUnit;local a6=require("src.app.types.vector3")local x=a6.Vector3;local ci=require("src.app.weapons.projectile.projectile")local bf=ci.Projectile;local ba=require("src.app.weapons.projectile.projectile-target")local a7=ba.ProjectileTargetStatic;local ai=ba.ProjectileMoverParabolic;local fp=require("src.resources.filters")local fq=fp.FilterIsEnemyAndAlive;local fr=100;local fs=FourCC("A00B")local ft=400;local fu=800;local fv="Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl"local fw="Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl"local fx="war3mapImported\\ToxicField.mdx"local fy=6;local fz=350;n.AcidPoolAbility=__TS__Class()local fA=n.AcidPoolAbility;fA.name="AcidPoolAbility"function fA.prototype.____constructor(self)self.damageGroup=CreateGroup()self.lastDelta=0;self.checkForSlowEvery=0.3;self.timeElapsedSinceLastSlowCheck=0.5;self.timeElapsed=0 end;function fA.prototype.initialise(self,fj)self.casterUnit=GetTriggerUnit()self.targetLoc=__TS__New(x,GetSpellTargetX(),GetSpellTargetY(),0)self.targetLoc.z=fj.game:getZFromXY(self.targetLoc.x,self.targetLoc.y)self.castingPlayer=GetOwningPlayer(self.casterUnit)local fB=ff(self.casterUnit):applyPolarOffset(GetUnitFacing(self.casterUnit),80)local fC=__TS__New(x,fB.x,fB.y,fj.game:getZFromXY(fB.x,fB.y)+30)local cz=self.targetLoc:subtract(fC)local be=__TS__New(bf,self.casterUnit,fC,__TS__New(a7,cz),__TS__New(ai,fC,self.targetLoc,Deg2Rad(GetRandomReal(30,70)))):onDeath(function(fD)self:createPool(fD:getPosition())end):onCollide(function()return true end)be:addEffect(fw,__TS__New(x,0,0,0),cz:normalise(),1)local b4=AddSpecialEffect(fv,fB.x,fB.y)BlzSetSpecialEffectHeight(b4,-30)DestroyEffect(b4)fj.game.weaponModule:addProjectile(be)return true end;function fA.prototype.createPool(self,fE)self.poolLocation=fE;self.sfx=AddSpecialEffect(fx,fE.x,fE.y)BlzSetSpecialEffectTimeScale(self.sfx,0.01)BlzSetSpecialEffectScale(self.sfx,1.3)end;function fA.prototype.process(self,fF,af)if self.poolLocation and self.castingPlayer then self.timeElapsed=self.timeElapsed+af;self.timeElapsedSinceLastSlowCheck=self.timeElapsedSinceLastSlowCheck+af;GroupEnumUnitsInRange(self.damageGroup,self.poolLocation.x,self.poolLocation.y,fz,fq(self.castingPlayer))self.lastDelta=af;ForGroup(self.damageGroup,function()return self:damageUnit()end)if self.timeElapsedSinceLastSlowCheck>=self.checkForSlowEvery then ForGroup(self.damageGroup,function()return self:slowUnit(fF)end)self.timeElapsedSinceLastSlowCheck=0 end end;return self.timeElapsed<fy end;function fA.prototype.damageUnit(self)if self.casterUnit then local ay=GetEnumUnit()UnitDamageTarget(self.casterUnit,ay,fr*self.lastDelta,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)end end;function fA.prototype.slowUnit(self,fF)local ay=GetEnumUnit()fF.game:useDummyFor(function(dO)SetUnitX(dO,GetUnitX(ay))SetUnitY(dO,GetUnitY(ay)+50)IssueTargetOrder(dO,"slow",GetEnumUnit())end,fs)end;function fA.prototype.destroy(self,fj)local bs=self.sfx and BlzSetSpecialEffectTimeScale(self.sfx,10)local bs=self.sfx and DestroyEffect(self.sfx)DestroyGroup(self.damageGroup)return true end;return n end,["src.lib.order-ids"]=function()local n={}n.SMART_ORDER_ID=851971;n.UNIT_IS_FLY=FourCC("A00C")return n end,["src.app.abilities.alien.leap"]=function()require("lualib_bundle")local n={}local a6=require("src.app.types.vector3")local x=a6.Vector3;local ba=require("src.app.weapons.projectile.projectile-target")local ai=ba.ProjectileMoverParabolic;local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;local fG=require("src.lib.order-ids")local fH=fG.UNIT_IS_FLY;local fI=FourCC("LEAP")local fJ=400;n.LeapAbility=__TS__Class()local fK=n.LeapAbility;fK.name="LeapAbility"function fK.prototype.____constructor(self)self.unitLocTracker=__TS__New(x,0,0,0)self.initialZ=0;self.timeElapsed=0 end;function fK.prototype.initialise(self,fF)self.casterUnit=GetTriggerUnit()local fL=BlzGetUnitAbilityCooldownRemaining(self.casterUnit,fI)if fL>0 then return false end;local cu=__TS__New(x,GetUnitX(self.casterUnit),GetUnitY(self.casterUnit),0)cu.z=fF.game:getZFromXY(cu.x,cu.y)local dl=__TS__New(x,0,0,0)local fM=GetSpellAbilityId()>0;if not fM then dl.x=GetOrderPointX()dl.y=GetOrderPointY()local af=dl:subtract(cu)local da=af:getLength()af=af:normalise():multiplyN(math.min(da,fJ))dl=cu:add(af)dl.z=cu.z;BlzStartUnitAbilityCooldown(self.casterUnit,fI,BlzGetAbilityCooldown(fI,0))else dl.x=GetUnitX(self.casterUnit)dl.y=GetUnitY(self.casterUnit)dl=dl:projectTowards2D(Rad2Deg(GetUnitFacing(self.casterUnit)),150)dl.z=fF.game:getZFromXY(dl.x,dl.y)+10 end;self.initialZ=cu.z;self.mover=__TS__New(ai,cu,dl,Deg2Rad(fM and 82 or 45))self.unitLocTracker=cu;local b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cu.x,cu.y)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.7)BlzSetSpecialEffectTimeScale(b4,1)BlzSetSpecialEffectTime(b4,0.2)BlzSetSpecialEffectYaw(b4,GetRandomInt(0,360))DestroyEffect(b4)b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cu.x,cu.y)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.8)BlzSetSpecialEffectTimeScale(b4,0.7)BlzSetSpecialEffectTime(b4,0.2)BlzSetSpecialEffectYaw(b4,GetRandomInt(0,360))DestroyEffect(b4)b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cu.x,cu.y)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.9)BlzSetSpecialEffectTimeScale(b4,0.4)BlzSetSpecialEffectTime(b4,0.2)BlzSetSpecialEffectYaw(b4,GetRandomInt(0,360))DestroyEffect(b4)c7(self:getRandomSound(),self.casterUnit,100)local s=Rad2Deg(Atan2(dl.y-cu.y,dl.x-cu.x))BlzSetUnitFacingEx(self.casterUnit,s)BlzPauseUnitEx(self.casterUnit,true)SetUnitAnimation(self.casterUnit,"attack")SetUnitTimeScale(self.casterUnit,0.3)UnitAddAbility(self.casterUnit,fH)BlzUnitDisableAbility(self.casterUnit,fH,true,true)return true end;function fK.prototype.getRandomSound(self)local fN={"Units\\Critters\\Hydralisk\\HydraliskYes1.flac","Units\\Critters\\Hydralisk\\HydraliskYesAttack1.flac","Units\\Critters\\Hydralisk\\HydraliskYesAttack2.flac"}return fN[GetRandomInt(0,#fN-1)+1]end;function fK.prototype.process(self,fF,af)if self.mover and self.casterUnit then local fO=self.mover:move(self.mover.originalPos,self.mover.originalDelta,self.mover.velocity,af)local d9=__TS__New(x,GetUnitX(self.casterUnit)+fO.x,GetUnitY(self.casterUnit)+fO.y,self.unitLocTracker.z+fO.z)self.unitLocTracker=d9;local fP=fF.game:getZFromXY(d9.x,d9.y)SetUnitX(self.casterUnit,d9.x)SetUnitY(self.casterUnit,d9.y)SetUnitFlyHeight(self.casterUnit,d9.z+self.initialZ-fP,9999)if self.unitLocTracker.z<fP then return false end end;return true end;function fK.prototype.destroy(self,fF)if self.casterUnit then local cu=__TS__New(x,GetUnitX(self.casterUnit),GetUnitY(self.casterUnit),0)cu.z=fF.game:getZFromXY(cu.x,cu.y)local b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cu.x,cu.y)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.8)BlzSetSpecialEffectTimeScale(b4,0.8)BlzSetSpecialEffectTime(b4,0.2)BlzSetSpecialEffectYaw(b4,GetRandomInt(0,360))DestroyEffect(b4)b4=AddSpecialEffect("war3mapImported\\DustWave.mdx",cu.x,cu.y)BlzSetSpecialEffectAlpha(b4,40)BlzSetSpecialEffectScale(b4,0.9)BlzSetSpecialEffectTimeScale(b4,0.5)BlzSetSpecialEffectTime(b4,0.2)BlzSetSpecialEffectYaw(b4,GetRandomInt(0,360))DestroyEffect(b4)SetUnitAnimation(self.casterUnit,"stand")SetUnitTimeScale(self.casterUnit,1)UnitRemoveAbility(self.casterUnit,fH)local bs=self.casterUnit and BlzPauseUnitEx(self.casterUnit,false)local bs=self.casterUnit and SetUnitFlyHeight(self.casterUnit,0,9999)end;return true end;return n end,["src.app.abilities.alien.transform"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local o=w.Vector2;local ff=w.vectorFromUnit;local a6=require("src.app.types.vector3")local x=a6.Vector3;local ci=require("src.app.weapons.projectile.projectile")local bf=ci.Projectile;local ba=require("src.app.weapons.projectile.projectile-target")local a7=ba.ProjectileTargetStatic;local ai=ba.ProjectileMoverParabolic;local fG=require("src.lib.order-ids")local fQ=fG.SMART_ORDER_ID;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;n.TRANSFORM_ID=FourCC("TF01")local fR=0.06;local fS={"Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl"}local fT="Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl"local fU="Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl"local fV="Units\\Undead\\Abomination\\AbominationExplosion.mdl"local fW=950;local fX=150;local fY=2;n.TransformAbility=__TS__Class()local fZ=n.TransformAbility;fZ.name="TransformAbility"function fZ.prototype.____constructor(self)self.timeElapsed=0;self.timeElapsedSinceSFX=fR;self.orderTrigger=__TS__New(bu)self.timeElapsed=0 end;function fZ.prototype.initialise(self,fF)self.casterUnit=GetTriggerUnit()self.orderTrigger:RegisterUnitIssuedOrder(self.casterUnit,EVENT_UNIT_ISSUED_POINT_ORDER)self.orderTrigger:AddCondition(function()return GetIssuedOrderId()==fQ end)self.orderTrigger:AddAction(function()self.previousOrder=GetIssuedOrderId()self.previousOrderTarget=__TS__New(o,GetOrderPointX(),GetOrderPointY())end)return true end;function fZ.prototype.process(self,fF,af)self.timeElapsed=self.timeElapsed+af;self.timeElapsedSinceSFX=self.timeElapsedSinceSFX+af;if self.timeElapsedSinceSFX>=fR and self.casterUnit then self.timeElapsedSinceSFX=0;local f_=ff(self.casterUnit)local g0=fF.game:getZFromXY(f_.x,f_.y)local fC=__TS__New(x,f_.x,f_.y,g0+80)local g1=__TS__New(x,fC.x+self:getRandomOffset(),fC.y+self:getRandomOffset(),g0)local g2=__TS__New(x,fC.x,fC.y,g0+20)local be=__TS__New(bf,self.casterUnit,g2,__TS__New(a7,g1:subtract(fC)),__TS__New(ai,g2,g1,Deg2Rad(GetRandomReal(60,85)))):onDeath(function(fD)self:bloodSplash(fD:getPosition())end):onCollide(function()return true end)be:addEffect(self:getRandomSFX(),__TS__New(x,0,0,0),g1:subtract(fC):normalise(),1)local g3=AddSpecialEffect(self:getBloodEffect(),fC.x,fC.y)BlzSetSpecialEffectZ(g3,fC.z-30)DestroyEffect(g3)fF.game.weaponModule:addProjectile(be)end;return self.timeElapsed<fY end;function fZ.prototype.getRandomOffset(self)local g4=GetRandomInt(0,1)return(g4==1 and-1 or 1)*math.max(fX,GetRandomInt(0,fW))end;function fZ.prototype.getBloodEffect(self)local c=GetRandomReal(self.timeElapsed/fY,self.timeElapsed/fY*2)return c>0.5 and fU or fT end;function fZ.prototype.getRandomSFX(self)return fS[GetRandomInt(0,#fS-1)+1]end;function fZ.prototype.bloodSplash(self,g5)end;function fZ.prototype.destroy(self,fF)if self.casterUnit then local f_=ff(self.casterUnit)local dY=GetOwningPlayer(self.casterUnit)local g6=IsUnitSelected(self.casterUnit,dY)ShowUnit(self.casterUnit,false)local g7=CreateUnit(dY,FourCC("ALI1"),f_.x,f_.y,GetUnitFacing(self.casterUnit))fF:trackUnitOrdersForAbilities(g7)SetUnitColor(g7,PLAYER_COLOR_BROWN)SetUnitLifePercentBJ(g7,GetUnitLifePercent(self.casterUnit))if g6 then SelectUnitAddForPlayer(g7,dY)SetPlayerName(dY,"Alien")end;if self.previousOrder and self.previousOrderTarget then IssuePointOrderById(g7,self.previousOrder,self.previousOrderTarget.x,self.previousOrderTarget.y)end;self.orderTrigger:destroy()end;return true end;return n end,["src.app.abilities.ability-module"]=function()require("lualib_bundle")local n={}local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local g8=require("src.app.abilities.human.roll-sprint")local fi=g8.RollWhenSprinting;local g9=require("src.app.abilities.alien.acid-pool")local fA=g9.AcidPoolAbility;local ga=require("src.app.abilities.alien.leap")local fK=ga.LeapAbility;local fG=require("src.lib.order-ids")local fQ=fG.SMART_ORDER_ID;local gb=require("src.app.abilities.alien.transform")local gc=gb.TRANSFORM_ID;local fZ=gb.TransformAbility;local gd=0.03;n.AbilityModule=__TS__Class()local ge=n.AbilityModule;ge.name="AbilityModule"function ge.prototype.____constructor(self,bP)self.game=bP;self.data={}self.triggerIterator=__TS__New(bu)self.triggerIterator:RegisterTimerEventPeriodic(gd)self.triggerIterator:AddAction(function()return self:process(gd)end)self.triggerAbilityCast=__TS__New(bu)self.triggerAbilityCast:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_SPELL_EFFECT)self.triggerAbilityCast:AddAction(function()return self:checkSpells()end)self.unitIssuedCommand=__TS__New(bu)self.unitIssuedCommand:AddAction(function()return self:onTrackUnitOrders()end)end;function ge.prototype.checkSpells(self)local a5=GetSpellAbilityId()if a5==FourCC("A003")then local dy=__TS__New(fi)if dy:initialise(self)then __TS__ArrayPush(self.data,dy)end elseif a5==FourCC("ACID")then local dy=__TS__New(fA)if dy:initialise(self)then __TS__ArrayPush(self.data,dy)end elseif a5==FourCC("LEAP")then local dy=__TS__New(fK)if dy:initialise(self)then __TS__ArrayPush(self.data,dy)end elseif a5==gc then local dy=__TS__New(fZ)if dy:initialise(self)then __TS__ArrayPush(self.data,dy)end end end;function ge.prototype.onTrackUnitOrders(self)local gf=GetTriggerUnit()local dd=GetIssuedOrderId()if dd==fQ and GetUnitAbilityLevel(gf,FourCC("LEAP"))>=1 then local dy=__TS__New(fK)if dy:initialise(self)then __TS__ArrayPush(self.data,dy)end end end;function ge.prototype.trackUnitOrdersForAbilities(self,bM)self.unitIssuedCommand:RegisterUnitIssuedOrder(bM,EVENT_UNIT_ISSUED_POINT_ORDER)end;function ge.prototype.process(self,af)self.data=__TS__ArrayFilter(self.data,function(bs,gg)local gh=not gg:process(self,af)if gh then gg:destroy(self)end;return not gh end)end;return n end,["src.app.types.progress-bar"]=function()require("lualib_bundle")local n={}n.PROGRESS_BAR_MODEL_PATH="Models\\Progressbar.mdxx"n.ProgressBar=__TS__Class()local gi=n.ProgressBar;gi.name="ProgressBar"function gi.prototype.____constructor(self)self.progress=0;self.isReverse=false end;function gi.prototype.show(self)self.bar=AddSpecialEffect(n.PROGRESS_BAR_MODEL_PATH,0,0)end;function gi.prototype.hide(self)self:destroy()end;function gi.prototype.moveTo(self,p,q,y)if not self.bar then return self end;BlzSetSpecialEffectX(self.bar,p)BlzSetSpecialEffectY(self.bar,q)BlzSetSpecialEffectZ(self.bar,y)return self end;function gi.prototype.setPercentage(self,gj)if not self.bar then return self end;BlzSetSpecialEffectTime(self.bar,gj)return self end;function gi.prototype.destroy(self)if not self.bar then return self end;DestroyEffect(self.bar)end;return n end,["src.app.interactions.interaction-event"]=function()require("lualib_bundle")local n={}local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local w=require("src.app.types.vector2")local ff=w.vectorFromUnit;local gk=require("src.app.types.progress-bar")local gi=gk.ProgressBar;n.INTERACT_MAXIMUM_DISTANCE=350;n.STUN_ID=FourCC("stun")n.SLOW_ID=FourCC("slow")n.InteractionEvent=__TS__Class()local gl=n.InteractionEvent;gl.name="InteractionEvent"function gl.prototype.____constructor(self,ay,gm,gn,bn,go,gp)self.unit=ay;self.targetUnit=gm;self.timeRequired=(function(fb,a,gq)fb[a]=gq;return gq end)(self,"timeRemaining",gn)self.callback=bn;self.startCallback=go;self.cancelCallback=gp;self.progressBar=__TS__New(gi)end;function gl.prototype.startInteraction(self)self.interactionTrigger=__TS__New(bu)self.interactionTrigger:RegisterUnitIssuedOrder(self.unit,EVENT_UNIT_ISSUED_POINT_ORDER)self.interactionTrigger:RegisterUnitIssuedOrder(self.unit,EVENT_UNIT_ISSUED_TARGET_ORDER)self.interactionTrigger:RegisterUnitIssuedOrder(self.unit,EVENT_UNIT_ISSUED_ORDER)self.interactionTrigger:AddAction(function()self:destroy()end)end;function gl.prototype.process(self,af)if not self.interactionTrigger or self.interactionTrigger.isDestroyed then return false end;local gr=ff(self.unit)local gs=ff(self.targetUnit)if gr:subtract(gs):getLength()<=n.INTERACT_MAXIMUM_DISTANCE then if self.timeRemaining==self.timeRequired then local bs=self.progressBar and self.progressBar:show()self:startCallback()end;if UnitHasBuffBJ(self.unit,n.STUN_ID)then af=0 elseif UnitHasBuffBJ(self.unit,n.SLOW_ID)then af=af/2 end;self.timeRemaining=self.timeRemaining-af;if self.timeRemaining<=0 then self:onInteractionCompletion()return false end else end;local bs=self.progressBar and self.progressBar:moveTo(gr.x,gr.y,BlzGetUnitZ(self.unit)+229):setPercentage(1-self.timeRemaining/self.timeRequired)return true end;function gl.prototype.onInteractionCompletion(self)self:callback()end;function gl.prototype.destroy(self)local bs=self.interactionTrigger and self.interactionTrigger:destroy()local bs=self.progressBar and self.progressBar:destroy()self.interactionTrigger=nil;self:cancelCallback()end;return n end,["src.app.interactions.interactable"]=function()local n={}return n end,["src.app.interactions.interaction-data"]=function()require("lualib_bundle")local n={}local es=require("src.app.world.zone-id")local et=es.ZONE_TYPE;local b1=require("src.lib.translators")local c7=b1.PlayNewSoundOnUnit;local bZ=require("src.resources.colours")local gt=bZ.COL_FLOOR_1;local gu=bZ.COL_FLOOR_2;local gv=bZ.COL_VENTS;n.Interactables=__TS__New(Map)local gw=__TS__Class()gw.name="Elevator"function gw.prototype.____constructor(self,g,gx,t)self.unit=g;self.inside_zone=gx;self.exit_offset=t end;local gy=__TS__New(Map)function n.initElevators()local gz=__TS__New(gw,gg_unit_n001_0032,et.FLOOR_1,{x=0,y=-180})local gA=__TS__New(gw,gg_unit_n001_0021,et.FLOOR_2,{x=0,y=-180})gz.to=gA;gA.to=gz;BlzSetUnitName(gz.unit,"Elevator to "..tostring(gu).."Floor 2|r")BlzSetUnitName(gA.unit,"Elevator to "..tostring(gt).."Floor 1|r")gy:set(GetHandleId(gz.unit),gz)gy:set(GetHandleId(gA.unit),gA)local gB={unitType=FourCC("n001"),onStart=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gy:get(gE)SetUnitAnimationByIndex(gm,1)KillSoundWhenDone(c7("Sounds\\ElevatorOpen.mp3",gm,90))if gF and gF.to then KillSoundWhenDone(c7("Sounds\\ElevatorOpen.mp3",gF.to.unit,90))SetUnitAnimationByIndex(gF.to.unit,1)end end,onCancel=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gy:get(gE)SetUnitAnimationByIndex(gm,0)if gF and gF.to then SetUnitAnimationByIndex(gF.to.unit,0)end end,action=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gy:get(gE)if gF and gF.to then SetUnitX(gD,GetUnitX(gF.to.unit)+gF.to.exit_offset.x)SetUnitY(gD,GetUnitY(gF.to.unit)+gF.to.exit_offset.y)if IsUnitSelected(gD,GetOwningPlayer(gD))then PanCameraToTimedForPlayer(GetOwningPlayer(gD),GetUnitX(gD),GetUnitY(gD),0)end;gC.game.worldModule:travel(gD,gF.to.inside_zone)end end}n.Interactables:set(gB.unitType,gB)end;local gG=__TS__New(Map)function n.initHatches()local gH=__TS__New(gw,gg_unit_n002_0033,et.FLOOR_1,{x=0,y=0})local gI=__TS__New(gw,gg_unit_n002_0034,et.VENTRATION,{x=0,y=0})gH.to=gI;gI.to=gH;BlzSetUnitName(gH.unit,"To "..tostring(gv).."Service Tunnels|r")BlzSetUnitName(gI.unit,"Hatch to "..tostring(gt).."Floor 1|r")gG:set(GetHandleId(gH.unit),gI)gG:set(GetHandleId(gI.unit),gH)local gJ={unitType=FourCC("n002"),onStart=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gG:get(gE)SetUnitTimeScale(gm,1.4)SetUnitAnimationByIndex(gm,1)KillSoundWhenDone(c7("Sounds\\MetalHatch.mp33",gm,60))if gF and gF.to then SetUnitTimeScale(gF.to.unit,1.4)c7("Sounds\\MetalHatch.mp3",gF.to.unit,60)SetUnitAnimationByIndex(gF.to.unit,1)end end,onCancel=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gG:get(gE)SetUnitAnimationByIndex(gm,2)if gF and gF.to then SetUnitAnimationByIndex(gF.to.unit,2)end end,action=function(bs,gC,gD,gm)local gE=GetHandleId(gm)local gF=gG:get(gE)if gF and gF.to then SetUnitX(gD,GetUnitX(gF.to.unit)+gF.exit_offset.x)SetUnitY(gD,GetUnitY(gF.to.unit)+gF.exit_offset.y)if IsUnitSelected(gD,GetOwningPlayer(gD))then PanCameraToTimedForPlayer(GetOwningPlayer(gD),GetUnitX(gD),GetUnitY(gD),0)end;gC.game.worldModule:travel(gD,gF.to.inside_zone)end end}n.Interactables:set(gJ.unitType,gJ)end;return n end,["src.app.interactions.interaction-module"]=function()require("lualib_bundle")local n={}local gK=require("src.app.interactions.interaction-event")local gl=gK.InteractionEvent;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local gL=require("src.app.interactions.interaction-data")local gM=gL.Interactables;local gN=gL.initElevators;local gO=gL.initHatches;local fG=require("src.lib.order-ids")local fQ=fG.SMART_ORDER_ID;n.UPDATE_PERIODICAL_INTERACTION=0.03;n.InteractionModule=__TS__Class()local gP=n.InteractionModule;gP.name="InteractionModule"function gP.prototype.____constructor(self,bP)self.interactions={}self.game=bP;self.interactionUpdateTrigger=__TS__New(bu)self.interactionUpdateTrigger:RegisterTimerEventPeriodic(n.UPDATE_PERIODICAL_INTERACTION)self.interactionUpdateTrigger:AddAction(function()return self:processInteractions(n.UPDATE_PERIODICAL_INTERACTION)end)self.interactionBeginTrigger=__TS__New(bu)self.interactionBeginTrigger:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER)self.interactionBeginTrigger:AddCondition(function()return GetIssuedOrderId()==fQ end)self.interactionBeginTrigger:AddAction(function()local gQ=GetTriggerUnit()local gm=GetOrderTargetUnit()local gR=GetUnitTypeId(gm)local gS=gM:has(gR)and gM:get(gR)if gS and(not gS.condition or gS:condition(self,gQ,gm))then local gT=__TS__New(gl,GetTriggerUnit(),GetOrderTargetUnit(),1.5,function()return gS:action(self,gQ,gm)end,function()return gS.onStart and gS:onStart(self,gQ,gm)end,function()return gS.onCancel and gS:onCancel(self,gQ,gm)end)gT:startInteraction()__TS__ArrayPush(self.interactions,gT)end end)gN()gO()end;function gP.prototype.processInteractions(self,af)self.interactions=__TS__ArrayFilter(self.interactions,function(bs,gU)local gh=not gU:process(af)if gh then gU:destroy()end;return not gh end)end;return n end,["src.app.types.widget-id"]=function()local n={}n.LIGHT_DEST_ID=FourCC("B002")return n end,["src.app.world.zone-type"]=function()require("lualib_bundle")local n={}local cj=require("src.app.types.timed-event")local bT=cj.TimedEvent;local gV=require("src.app.types.widget-id")local gW=gV.LIGHT_DEST_ID;local gX="Sounds\\LightClack.mp3"n.Zone=__TS__Class()local gY=n.Zone;gY.name="Zone"function gY.prototype.____constructor(self,a5)self.adjacent={}self.unitsInside={}self.id=a5 end;function gY.prototype.onLeave(self,gZ,ay)local e7=__TS__ArrayIndexOf(self.unitsInside,ay)if e7>=0 then __TS__ArraySplice(self.unitsInside,e7,1)end end;function gY.prototype.onEnter(self,gZ,ay)__TS__ArrayPush(self.unitsInside,ay)end;function gY.prototype.getPlayersInZone(self)local eB=__TS__ArrayMap(self.unitsInside,function(bs,g)return GetOwningPlayer(g)end)return __TS__ArrayFilter(eB,function(self,g_,a4,cA)return a4==__TS__ArrayIndexOf(cA,g_)end)end;function gY.prototype.doCauseFear(self)return false end;n.ShipZone=__TS__Class()local h0=n.ShipZone;h0.name="ShipZone"h0.____super=n.Zone;setmetatable(h0,h0.____super)setmetatable(h0.prototype,h0.____super.prototype)function h0.prototype.____constructor(self,...)h0.____super.prototype.____constructor(self,...)self.hasPower=true;self.alwaysCauseFear=false;self.hasOxygen=true;self.lightSources={}end;function h0.prototype.onLeave(self,gZ,ay)h0.____super.prototype.onLeave(self,gZ,ay)end;function h0.prototype.onEnter(self,gZ,ay)h0.____super.prototype.onEnter(self,gZ,ay)gZ.askellon:applyPowerChange(GetOwningPlayer(ay),self.hasPower,false)end;function h0.prototype.updatePower(self,h1,h2)if self.hasPower~=h2 then __TS__ArrayMap(self:getPlayersInZone(),function(bs,f)return h1.askellon:applyPowerChange(f,h2,true)end)if not h2 then __TS__ArrayForEach(self.lightSources,function(bs,h3,a)local h4=a;local bH=GetRandomInt(2,4)local h5=500+bH*bH*200;h1.game.timedEventQueue:AddEvent(__TS__New(bT,function()local h6=self.lightSources[h4+1]local h7=GetDestructableX(h6)local h8=GetDestructableY(h6)local fP=h1.game:getZFromXY(h7,h8)local u=CreateSound(gX,false,true,true,10,10,"")SetSoundDuration(u,GetSoundFileDuration(gX))SetSoundChannel(u,1)SetSoundVolume(u,127)SetSoundPitch(u,1)SetSoundDistances(u,2000,10000)SetSoundDistanceCutoff(u,4500)local eR=Location(h7,h8)PlaySoundAtPointBJ(u,127,eR,fP)RemoveLocation(eR)KillSoundWhenDone(u)RemoveDestructable(h6)self.lightSources[h4+1]=CreateDestructableZ(gW,h7,h8,fP+9999,0,1,0)return true end,h5))end)else __TS__ArrayForEach(self.lightSources,function(bs,h3,a)local h4=a;local bH=GetRandomInt(2,4)local h5=500+bH*bH*200;h1.game.timedEventQueue:AddEvent(__TS__New(bT,function()local h6=self.lightSources[h4+1]local h7=GetDestructableX(h6)local h8=GetDestructableY(h6)local fP=h1.game:getZFromXY(h7,h8)local u=CreateSound(gX,false,true,true,10,10,"")SetSoundDuration(u,GetSoundFileDuration(gX))SetSoundChannel(u,2)SetSoundVolume(u,127)SetSoundPitch(u,1)SetSoundDistances(u,2000,10000)SetSoundDistanceCutoff(u,4500)local eR=Location(h7,h8)PlaySoundAtPointBJ(u,127,eR,fP)KillSoundWhenDone(u)RemoveLocation(eR)RemoveDestructable(h6)self.lightSources[h4+1]=CreateDestructableZ(gW,h7,h8,fP+100,0,1,0)return true end,h5))end)end end;self.hasPower=h2 end;function h0.prototype.doCauseFear(self)return not self.hasPower or self.alwaysCauseFear end;return n end,["src.app.world.the-askellon"]=function()require("lualib_bundle")local n={}local es=require("src.app.world.zone-id")local et=es.ZONE_TYPE;local h9=require("src.app.world.zone-type")local h0=h9.ShipZone;local dJ=require("src.app.types.sound-ref")local dC=dJ.SoundRef;local cj=require("src.app.types.timed-event")local bT=cj.TimedEvent;local dI=require("src.app.buff.buff-instance")local dv=dI.BuffInstanceCallback;local ha=300;local hb=900;local hc=1800;n.TheAskellon=__TS__Class()local hd=n.TheAskellon;hd.name="TheAskellon"function hd.prototype.____constructor(self,gZ)self.powerDownSound=__TS__New(dC,"Sounds\\PowerDown.mp3",false)self.powerUpSound=__TS__New(dC,"Sounds\\powerUp.mp3",false)self.floors=__TS__New(Map)self.world=gZ;self.floors:set(et.FLOOR_1,__TS__New(h0,et.FLOOR_1))self.floors:set(et.FLOOR_2,__TS__New(h0,et.FLOOR_2))self.floors:set(et.VENTRATION,__TS__New(h0,et.VENTRATION))local he=self.floors:get(et.FLOOR_1)if he then __TS__ArrayPush(he.lightSources,gg_dest_B002_0015)__TS__ArrayPush(he.lightSources,gg_dest_B002_0017)__TS__ArrayPush(he.lightSources,gg_dest_B002_0019)__TS__ArrayPush(he.lightSources,gg_dest_B002_0022)end;local hf=self.floors:get(et.VENTRATION)if hf then hf:updatePower(gZ,false)hf.alwaysCauseFear=true end end;function hd.prototype.findZone(self,gx)return self.floors:get(gx)end;function hd.prototype.applyPowerChange(self,dY,hg,hh)if hg and hh then if GetLocalPlayer()==dY then self.powerUpSound:playSound()end;self.world.game.timedEventQueue:AddEvent(__TS__New(bT,function()if GetLocalPlayer()==dY then SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")end;return true end,4000))elseif hg and not hh and dY==GetLocalPlayer()then SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")elseif not hg and dY==GetLocalPlayer()then if hh then self.powerDownSound:playSound()end;SetDayNightModels("","")end;if not hg then local ez=self.world.game.crewModule:getCrewmemberForPlayer(dY)if ez then ez:addDespair(self.world.game,__TS__New(dv,function()local y=self.world:getUnitZone(ez.unit)return(y and function()return y:doCauseFear()end or function()return false end)()end))end end end;function hd.prototype.damageShip(self,c3,gx)local hi=(gx and function()return self:findZone(gx)end or function()return self:getRandomZone()[2]end)()local hj=self.world.game.spaceModule.mainShip.unit;if hj then UnitDamageTarget(hj,hj,c3,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)end;if c3>ha then elseif c3>hb then elseif c3>hc then end end;function hd.prototype.getRandomZone(self)local hk=Array:from(self.floors)return hk[math.floor(math.random()*#hk)+1]end;return n end,["src.app.world.world-module"]=function()require("lualib_bundle")local n={}local hl=require("src.app.world.the-askellon")local hd=hl.TheAskellon;local es=require("src.app.world.zone-id")local et=es.ZONE_TYPE;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;n.WorldModule=__TS__Class()local hm=n.WorldModule;hm.name="WorldModule"function hm.prototype.____constructor(self,bP)self.worldZones=__TS__New(Map)self.unitLocation=__TS__New(Map)self.game=bP;self.askellon=__TS__New(hd,self)local hn=__TS__New(bu)hn:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_DEATH)hn:AddAction(function()return self:unitDeath()end)end;function hm.prototype.travel(self,ay,d6)local ho=GetHandleId(ay)local hp=self.unitLocation:get(ho)local hq=self:getZone(d6)local bs=hp and hp:onLeave(self,ay)local bs=hq and hq:onEnter(self,ay)local bs=hq and self.unitLocation:set(ho,hq)if hp then Q.Information(tostring(GetHeroProperName(ay)).."::"..tostring(et[hp.id]).."->"..tostring(et[d6]))end end;function hm.prototype.unitDeath(self)local ay=GetTriggerUnit()local hr=GetHandleId(ay)if self.unitLocation:has(hr)then local gx=self.unitLocation:get(hr)local bs=gx and gx:onLeave(self,ay)self.unitLocation:delete(hr)end end;function hm.prototype.getZone(self,hs)return self.askellon:findZone(hs)or self.worldZones:get(hs)end;function hm.prototype.getPlayersInZone(self,hs)return{}end;function hm.prototype.getUnitZone(self,bM)return self.unitLocation:get(GetHandleId(bM))end;return n end,["src.app.galaxy.sector-names"]=function()local n={}n.SECTOR_PREFIXES={"Alpha","Beta","Zeta","Gamma","Charlie","Founding","Lost","Terrible","Frost","Prima","Old"}n.SECTOR_NAMES={"Sol","Dionysus","Guthao","Valanope","Syke","Yestrucarro","Boar","Enides","Xagaoruta","Chongiuclite","Brion","Yaecury","Steinway","Crichi","Thullon","Bamania","Bolla","Leron","Galion","Chuzion","Lladivis","Iskies","Xentara"}return n end,["src.app.galaxy.sector-sector-type"]=function()require("lualib_bundle")local n={}local ht=require("src.app.galaxy.sector-names")local hu=ht.SECTOR_NAMES;local hv=ht.SECTOR_PREFIXES;n.SpaceSector=__TS__Class()local hw=n.SpaceSector;hw.name="SpaceSector"function hw.prototype.____constructor(self)self.name=""self.seed=""end;function hw.prototype.initalise(self)self:nameSector()end;function hw.prototype.nameSector(self)local hx=hv[math.floor(math.random()*#hv)+1]local d_=hu[math.floor(math.random()*#hu)+1]self.name=tostring(hx).." "..tostring(d_)end;function hw.prototype.setSeed(self,hy)self.seed=hy end;return n end,["src.app.galaxy.sector-type"]=function()require("lualib_bundle")local n={}local hz=require("src.app.galaxy.sector-sector-type")local hw=hz.SpaceSector;n.SpaceGrid=__TS__Class()local hA=n.SpaceGrid;hA.name="SpaceGrid"function hA.prototype.____constructor(self)self.sectors={}end;function hA.prototype.initSectors(self,eS,eT,eU,eV)local p=eS;while(function()local aX=p;p=aX+1;return aX end)()<eU do local hB={}local q=eT;while(function()local aX=q;q=aX+1;return aX end)()<eV do __TS__ArrayPush(hB,__TS__New(hw))end;__TS__ArrayPush(self.sectors,hB)end;__TS__ArrayForEach(self.sectors,function(bs,hC)return __TS__ArrayForEach(hC,function(bs,hD)return hD:initalise()end)end)end;return n end,["src.app.galaxy.galaxy-module"]=function()require("lualib_bundle")local n={}local hE=require("src.app.galaxy.sector-type")local hA=hE.SpaceGrid;n.GalaxyModule=__TS__Class()local hF=n.GalaxyModule;hF.name="GalaxyModule"function hF.prototype.____constructor(self,bP)self.game=bP;self.spaceGrid=__TS__New(hA)end;function hF.prototype.initSectors(self)self.spaceGrid:initSectors(-5,-5,5,5)end;function hF.prototype.createNavigationGrid(self)local hG=GetRectCenterX(NAGIVATION_RECT)local hH=GetRectCenterY(NAGIVATION_RECT)end;return n end,["src.app.game"]=function()require("lualib_bundle")local n={}local hI=require("src.app.crewmember.crewmember-module")local ew=hI.CrewModule;local hJ=require("src.app.weapons.weapon-module")local d1=hJ.WeaponModule;local hK=require("src.app.types.timed-event-queue")local bO=hK.TimedEventQueue;local hL=require("src.app.force.force-module")local ef=hL.ForceModule;local hM=require("src.app.space.space-module")local f1=hM.SpaceModule;local bN=require("src.app.types.jass-overrides.trigger")local bu=bN.Trigger;local hN=require("src.app.types.game-time-elapsed")local fd=hN.GameTimeElapsed;local hO=require("src.app.shops.gene-modules")local fe=hO.GeneModule;local hP=require("src.app.abilities.ability-module")local ge=hP.AbilityModule;local hQ=require("src.app.interactions.interaction-module")local gP=hQ.InteractionModule;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local w=require("src.app.types.vector2")local o=w.Vector2;local hR=require("src.app.world.world-module")local hm=hR.WorldModule;local es=require("src.app.world.zone-id")local et=es.ZONE_TYPE;local hS=require("src.app.galaxy.galaxy-module")local hF=hS.GalaxyModule;n.Game=__TS__Class()local hT=n.Game;hT.name="Game"function hT.prototype.____constructor(self)self.TEMP_LOCATION=Location(0,0)self.noTurn=false;self.timedEventQueue=__TS__New(bO,self)self.gameTimeElapsed=__TS__New(fd)self.galaxyModule=__TS__New(hF,self)self.forceModule=__TS__New(ef,self)self.weaponModule=__TS__New(d1,self)self.spaceModule=__TS__New(f1,self)self.worldModule=__TS__New(hm,self)self.crewModule=__TS__New(ew,self)self.abilityModule=__TS__New(ge,self)self.geneModule=__TS__New(fe,self)self.interactionsModule=__TS__New(gP,self)self.galaxyModule:initSectors()self:initCommands()self:makeUnitsTurnInstantly()end;function hT.prototype.getTimeStamp(self)return self.gameTimeElapsed:getTimeElapsed()end;function hT.prototype.initCommands(self)local hU=__TS__New(bu)__TS__ArrayForEach(self.forceModule:getActivePlayers(),function(bs,dY)hU:RegisterPlayerChatEvent(dY,"-",false)end)hU:AddAction(function()local hV=GetTriggerPlayer()local ez=self.crewModule:getCrewmemberForPlayer(hV)local U=GetEventPlayerChatString()local hW=true;Q.Information("Player name: ",GetPlayerName(hV))if U=="-resolve"and ez then ez:testResolve(self)elseif U=="-u"and ez then if ez.weapon then ez.weapon:detach()ez.weapon:updateTooltip(self.weaponModule,ez)end elseif U=="-nt"then self.noTurn=not self.noTurn elseif U=="-p1off"then Q.Information("Killing power to floor 1")local y=self.worldModule.askellon:findZone(et.FLOOR_1)local bs=y and y:updatePower(self.worldModule,false)elseif U=="-p1on"then Q.Information("Restoring power to floor 1")local y=self.worldModule.askellon:findZone(et.FLOOR_1)local bs=y and y:updatePower(self.worldModule,true)elseif U=="-testalien"then self:getCameraXY(hV,function(cA,eP)local g7=CreateUnit(hV,FourCC("ALI1"),eP.x,eP.y,bj_UNIT_FACING)self.abilityModule:trackUnitOrdersForAbilities(g7)end)end end)end;function hT.prototype.useDummyFor(self,bn,hX)local hY=CreateUnit(Player(25),FourCC("dumy"),0,0,bj_UNIT_FACING)ShowUnit(hY,false)UnitAddAbility(hY,hX)bn(nil,hY)UnitApplyTimedLife(hY,0,3)end;function hT.prototype.getZFromXY(self,p,q)MoveLocation(self.TEMP_LOCATION,p,q)return GetLocationZ(self.TEMP_LOCATION)end;function hT.prototype.getCameraXY(self,bB,dw)local hZ="CAMERA"local h_=__TS__New(bu)BlzTriggerRegisterPlayerSyncEvent(h_.nativeTrigger,bB,hZ,false)h_:AddAction(function()local i0=BlzGetTriggerSyncData()local i1=__TS__StringSplit(i0,",")local u=__TS__New(o,S2R(i1[1]),S2R(i1[2]))Q.Information("Got data: "..tostring(u.x)..", "..tostring(u.y))h_:destroy()dw(nil,u)end)if GetLocalPlayer()==bB then local p=GetCameraTargetPositionX()local q=GetCameraTargetPositionY()BlzSendSyncData(hZ,tostring(p)..","..tostring(q))end end;function hT.prototype.makeUnitsTurnInstantly(self)local i2=__TS__New(bu)i2:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER)i2:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)i2:RegisterAnyUnitEventBJ(EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)i2:AddAction(function()if not self.noTurn then return end;local gf=GetTriggerUnit()local i3=GetUnitX(gf)local i4=GetUnitY(gf)local i5=GetOrderPointX()local i6=GetOrderPointY()if i5==nil then local g=GetOrderTargetUnit()i5=GetUnitX(g)i6=GetUnitY(g)end;local s=Rad2Deg(Atan2(i6-i4,i5-i3))BlzSetUnitFacingEx(gf,s)end)end;return n end,["src.lib.serilog.string-sink"]=function()require("lualib_bundle")local n={}local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local i7=cP.LogEventType;local i8=cP.LogLevel;local b1=require("src.lib.translators")local i9=b1.SendMessageUnlogged;n.StringSink=__TS__Class()local ia=n.StringSink;ia.name="StringSink"function ia.prototype.____constructor(self,ib,ic)self.logLevel=ib;self.printer=ic;_G.SendMessage=function(as)Q.Message("{\"s\":\"BROADCAST\", \"m\":\""..tostring(as).."\"}")i9(as)end end;function ia.prototype.LogLevel(self)return self.logLevel end;function ia.prototype.Log(self,a3,id)local U=""do local a4=0;while a4<#id do local bQ=id[a4+1]if bQ.Type==i7.Text then U=tostring(U)..tostring(bQ.Text)elseif bQ.Type==i7.Parameter then local ie=type(bQ.Value)local ig=n.StringSink.Colors[ie]if ig then U=tostring(U).."|cff"..tostring(ig)end;if n.StringSink.Brackets[ie]then U=tostring(U).."{ "end;U=tostring(U)..tostring(bQ.Value)if n.StringSink.Brackets[ie]then U=tostring(U).." }"end;if ig then U=tostring(U).."|r"end end;a4=a4+1 end end;self.printer(string.format("[%s]: %s",n.StringSink.Prefix[a3],U))end;ia.Prefix={[i8.None]="|cffffffffNON|r",[i8.Verbose]="|cff9d9d9dVRB|r",[i8.Debug]="|cff9d9d9dDBG|r",[i8.Information]="|cffe6cc80INF|r",[i8.Message]="|cffe6cc80MSG|r",[i8.Event]="|cffe6cc80EVT|r",[i8.Warning]="|cffffcc00WRN|r",[i8.Error]="|cffff8000ERR|r",[i8.Fatal]="|cffff0000FTL|r"}ia.Colors={["nil"]="9d9d9d",boolean="1eff00",number="00ccff",string="ff8000",table="ffcc00",["function"]="ffcc00",userdata="ffcc00"}ia.Brackets={["nil"]=false,boolean=false,number=false,string=false,table=true,["function"]=true,userdata=true}return n end,["node_modules.w3ts.src.hooks.index"]=function()require("lualib_bundle")local n={}local ih;ih=main;local ii;ii=config;local ij={}local ik={}local il={}local im={}local function io()__TS__ArrayForEach(ij,function(bs,bv)return bv()end)ih()__TS__ArrayForEach(ik,function(bs,bv)return bv()end)end;local function ip()__TS__ArrayForEach(il,function(bs,bv)return bv()end)ii()__TS__ArrayForEach(im,function(bs,bv)return bv()end)end;main=io;config=ip;n.W3TS_HOOK={}n.W3TS_HOOK.MAIN_BEFORE="main::before"n.W3TS_HOOK.MAIN_AFTER="main::after"n.W3TS_HOOK.CONFIG_BEFORE="config::before"n.W3TS_HOOK.CONFIG_AFTER="config::after"local iq={[n.W3TS_HOOK.MAIN_BEFORE]=ij,[n.W3TS_HOOK.MAIN_AFTER]=ik,[n.W3TS_HOOK.CONFIG_BEFORE]=il,[n.W3TS_HOOK.CONFIG_AFTER]=im}function n.addScriptHook(ir,is)if not(iq[ir]~=nil)then return false end;__TS__ArrayPush(iq[ir],is)return true end;return n end,["src.main"]=function()require("lualib_bundle")local n={}local it=require("src.app.game")local hT=it.Game;local iu=require("src.lib.translators")local iv=require("src.lib.serilog.string-sink")local ia=iv.StringSink;local cP=require("src.lib.serilog.serilog")local Q=cP.Log;local i8=cP.LogLevel;local iw=require("node_modules.w3ts.src.hooks.index")local ix=iw.addScriptHook;local function iy()Q.Init({__TS__New(ia,i8.Debug,iu.SendMessageUnlogged)})local function iz()local iA=__TS__New(hT)end;iz()end;ix("main::after",iy)return n end,["src.app.abilities.human.grenade"]=function()require("lualib_bundle")local n={}local w=require("src.app.types.vector2")local ff=w.vectorFromUnit;local a6=require("src.app.types.vector3")local x=a6.Vector3;local ci=require("src.app.weapons.projectile.projectile")local bf=ci.Projectile;local ba=require("src.app.weapons.projectile.projectile-target")local a7=ba.ProjectileTargetStatic;local ai=ba.ProjectileMoverParabolic;local fp=require("src.resources.filters")local fq=fp.FilterIsEnemyAndAlive;local iB=100;local iC=200;local iD=FourCC("A00B")local fv="Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl"local fw="Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl"n.GrenadeLaunchAbility=__TS__Class()local iE=n.GrenadeLaunchAbility;iE.name="GrenadeLaunchAbility"function iE.prototype.____constructor(self)self.damageGroup=CreateGroup()end;function iE.prototype.initialise(self,fj)self.casterUnit=GetTriggerUnit()self.targetLoc=__TS__New(x,GetSpellTargetX(),GetSpellTargetY(),0)self.targetLoc.z=fj.game:getZFromXY(self.targetLoc.x,self.targetLoc.y)self.castingPlayer=GetOwningPlayer(self.casterUnit)local fB=ff(self.casterUnit):applyPolarOffset(GetUnitFacing(self.casterUnit),80)local fC=__TS__New(x,fB.x,fB.y,fj.game:getZFromXY(fB.x,fB.y)+30)local cz=self.targetLoc:subtract(fC)local be=__TS__New(bf,self.casterUnit,fC,__TS__New(a7,cz),__TS__New(ai,fC,self.targetLoc,Deg2Rad(GetRandomReal(15,30)))):onDeath(function(fD)self:explode(fD:getPosition())end):onCollide(function()return true end)be:addEffect(fw,__TS__New(x,0,0,0),cz:normalise(),1)local b4=AddSpecialEffect(fv,fB.x,fB.y)BlzSetSpecialEffectHeight(b4,-30)DestroyEffect(b4)fj.game.weaponModule:addProjectile(be)return true end;function iE.prototype.explode(self,fE)if self.castingPlayer then GroupEnumUnitsInRange(self.damageGroup,fE.x,fE.y,iC,fq(self.castingPlayer))ForGroup(self.damageGroup,function()return self:damageUnit()end)end end;function iE.prototype.process(self,fF,af)return true end;function iE.prototype.damageUnit(self)if self.casterUnit then local ay=GetEnumUnit()UnitDamageTarget(self.casterUnit,ay,iB,true,true,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)end end;function iE.prototype.destroy(self,fj)DestroyGroup(self.damageGroup)return true end;return n end,["src.app.galaxy.navigation-grid-type"]=function()require("lualib_bundle")local n={}n.NavigationGrid=__TS__Class()local iF=n.NavigationGrid;iF.name="NavigationGrid"function iF.prototype.____constructor(self,p,q)self.gridItems={}self.centerX=p;self.centerY=q end;function iF.prototype.renderForSectors(self,iG,iH)end;function iF.prototype.getFadeValue(self,iI)return 1 end;return n end,["src.app.shops.shop-module.ts"]=function()require("lualib_bundle")local n={}local iJ=__TS__Class()iJ.name="SharedShop"function iJ.prototype.____constructor(self,iK)self.unit=iK;self.playerUnits={}end;n.ShopModule=__TS__Class()local iL=n.ShopModule;iL.name="ShopModule"function iL.prototype.____constructor(self,bP)end;return n end,["src.lib.serilog.preload-sink"]=function()require("lualib_bundle")local n={}n.PreloadSink=__TS__Class()local iM=n.PreloadSink;iM.name="PreloadSink"function iM.prototype.____constructor(self,ib,iN)self.logLevel=ib;self.FileName=iN end;function iM.prototype.LogLevel(self)return self.logLevel end;function iM.prototype.LogEventToJson(self,iO)local iP="{"iP=tostring(iP).."\"t\":\""..tostring(iO.Text).."\""if iO.Value then local iQ=n.PreloadSink.SerializeRaw[type(iO.Value)]if iQ then iP=tostring(iP)..",\"v\":"..tostring(iO.Value)else iP=tostring(iP)..",\"v\":\""..tostring(iO.Value).."\""end end;iP=tostring(iP).."}"return iP end;function iM.prototype.Log(self,a3,id)local iP="{"iP=tostring(iP).."\"l\":"..tostring(a3)..","iP=tostring(iP).."\"e\":["do local a4=0;while a4<#id do iP=tostring(iP)..tostring(self:LogEventToJson(id[a4+1]))if a4<#id-1 then iP=tostring(iP)..","end;a4=a4+1 end end;iP=tostring(iP).."]"iP=tostring(iP).."}"PreloadGenStart()Preload("{\"logevent\":"..tostring(iP).."}")PreloadGenEnd(self.FileName)end;iM.SerializeRaw={["nil"]=false,boolean=true,number=true,string=false,table=false,["function"]=false,userdata=false}return n end,["src.lib.system.IO.File"]=function()require("lualib_bundle")local n={}n.File=__TS__Class()local iR=n.File;iR.name="File"function iR.prototype.____constructor(self)end;function iR.write(self,iS,iT)PreloadGenClear()PreloadGenStart()do local a=0;while a<#iT/200 do local iU=n.File.abilityList[a+1]local iV=string.sub(iT,a*n.File.preloadLimit+1,a*n.File.preloadLimit+n.File.preloadLimit)Preload("\" )\ncall BlzSetAbilityTooltip("..tostring(iU)..", \""..tostring(iV).."\", 0)\n//")a=a+1 end end;Preload("\" )\nendfunction\nfunction a takes nothing returns nothing\n //")PreloadGenEnd(iS)return self end;function iR.read(self,iS)local aZ=""local iW={}local iX=false;do local a=0;while a<#self.abilityList do iW[a+1]=BlzGetAbilityTooltip(self.abilityList[a+1],0)a=a+1 end end;Preloader(iS)do local a=0;while a<#self.abilityList do if not iX then local iV=BlzGetAbilityTooltip(self.abilityList[a+1],0)if iV==iW[a+1]then iX=true else aZ=tostring(aZ)..tostring(iV)end end;BlzSetAbilityTooltip(self.abilityList[a+1],iW[a+1],0)a=a+1 end end;return aZ end;iR.preloadLimit=200;iR.abilityList={FourCC("Amls"),FourCC("Aroc"),FourCC("Amic"),FourCC("Amil"),FourCC("Aclf")}iR.maxLength=n.File.preloadLimit*#n.File.abilityList;return n end,["src.resources.ability-tooltips"]=function()local n={}n.RESOLVE_TOOLTIP=function()return"|cff808080Everyone onboard the Askellon went through extensive surgeries to ensure that their bodies could withstand the brutalities of space travel. Be it the implanted and extensively enhanced andrenaline glands or just the human will to live; you will not go down without a fight.|r\n\nUpon reaching 30% hitpoints gain |cffffff00Resolve|r, enhancing all your abilities. |cff00ff00 \n - Gain 30% increased movement speed\n - All damage received is reduced by 30%\n|r\n"end;return n end,["lualib_bundle"]=function()function __TS__ArrayConcat(iY,...)local V={...}local iZ={}for bs,bl in ipairs(iY)do iZ[#iZ+1]=bl end;for bs,i_ in ipairs(V)do if pcall(function()return#i_ end)and type(i_)~="string"then local j0=i_;for bs,bl in ipairs(j0)do iZ[#iZ+1]=bl end else iZ[#iZ+1]=i_ end end;return iZ end;function __TS__ArrayEvery(aO,j1)do local a=0;while a<#aO do if not j1(_G,aO[a+1],a,aO)then return false end;a=a+1 end end;return true end;function __TS__ArrayFilter(aO,j1)local u={}do local a=0;while a<#aO do if j1(_G,aO[a+1],a,aO)then u[#u+1]=aO[a+1]end;a=a+1 end end;return u end;function __TS__ArrayForEach(aO,j2)do local a=0;while a<#aO do j2(_G,aO[a+1],a,aO)a=a+1 end end end;function __TS__ArrayFind(aO,j3)local r=#aO;local j4=0;while j4<r do local g_=aO[j4+1]if j3(_G,g_,j4,aO)then return g_ end;j4=j4+1 end;return nil end;function __TS__ArrayFindIndex(aO,j2)do local a=0;local r=#aO;while a<r do if j2(_G,aO[a+1],a,aO)then return a end;a=a+1 end end;return-1 end;function __TS__ArrayIndexOf(aO,j5,j6)local r=#aO;if r==0 then return-1 end;local _=0;if j6 then _=j6 end;if _>=r then return-1 end;local j4;if _>=0 then j4=_ else j4=r+_;if j4<0 then j4=0 end end;do local a=j4;while a<r do if aO[a+1]==j5 then return a end;a=a+1 end end;return-1 end;function __TS__ArrayMap(aO,j1)local j7={}do local a=0;while a<#aO do j7[a+1]=j1(_G,aO[a+1],a,aO)a=a+1 end end;return j7 end;function __TS__ArrayPush(aO,...)local hk={...}for bs,c9 in ipairs(hk)do aO[#aO+1]=c9 end;return#aO end;function __TS__ArrayReduce(aO,j2,...)local r=#aO;local j4=0;local j8=nil;if select("#",...)~=0 then j8=select(1,...)elseif r>0 then j8=aO[1]j4=1 else error("Reduce of empty array with no initial value",0)end;for a=j4,r-1 do j8=j2(_G,j8,aO[a+1],a,aO)end;return j8 end;function __TS__ArrayReduceRight(aO,j2,...)local r=#aO;local j4=r-1;local j8=nil;if select("#",...)~=0 then j8=select(1,...)elseif r>0 then j8=aO[j4+1]j4=j4-1 else error("Reduce of empty array with no initial value",0)end;for a=j4,0,-1 do j8=j2(_G,j8,aO[a+1],a,aO)end;return j8 end;function __TS__ArrayReverse(aO)local a=0;local aP=#aO-1;while a<aP do local aQ=aO[aP+1]aO[aP+1]=aO[a+1]aO[a+1]=aQ;a=a+1;aP=aP-1 end;return aO end;function __TS__ArrayShift(aO)return table.remove(aO,1)end;function __TS__ArrayUnshift(aO,...)local hk={...}do local a=#hk-1;while a>=0 do table.insert(aO,1,hk[a+1])a=a-1 end end;return#aO end;function __TS__ArraySort(aO,j9)if j9~=nil then table.sort(aO,function(ja,jb)return j9(_G,ja,jb)<0 end)else table.sort(aO)end;return aO end;function __TS__ArraySlice(jc,jd,je)local r=#jc;local jf=jd or 0;local j4;if jf<0 then j4=math.max(r+jf,0)else j4=math.min(jf,r)end;local jg=je;if je==nil then jg=r end;local jh;if jg<0 then jh=math.max(r+jg,0)else jh=math.min(jg,r)end;local iZ={}local _=0;while j4<jh do iZ[_+1]=jc[j4+1]j4=j4+1;_=_+1 end;return iZ end;function __TS__ArraySome(aO,j1)do local a=0;while a<#aO do if j1(_G,aO[a+1],a,aO)then return true end;a=a+1 end end;return false end;function __TS__ArraySplice(jc,...)local r=#jc;local ji=select("#",...)local jj=select(1,...)local jk=select(2,...)local jl;if jj<0 then jl=math.max(r+jj,0)else jl=math.min(jj,r)end;local jm=math.max(ji-2,0)local jn;if ji==0 then jn=0 elseif ji==1 then jn=r-jl else jn=math.min(math.max(jk or 0,0),r-jl)end;local iZ={}do local j4=0;while j4<jn do local d5=jl+j4;if jc[d5+1]then iZ[j4+1]=jc[d5+1]end;j4=j4+1 end end;if jm<jn then do local j4=jl;while j4<r-jn do local d5=j4+jn;local d6=j4+jm;if jc[d5+1]then jc[d6+1]=jc[d5+1]else jc[d6+1]=nil end;j4=j4+1 end end;do local j4=r;while j4>r-jn+jm do jc[j4]=nil;j4=j4-1 end end elseif jm>jn then do local j4=r-jn;while j4>jl do local d5=j4+jn-1;local d6=j4+jm-1;if jc[d5+1]then jc[d6+1]=jc[d5+1]else jc[d6+1]=nil end;j4=j4-1 end end end;local aP=jl;for a=3,ji do jc[aP+1]=select(a,...)aP=aP+1 end;do local j4=#jc-1;while j4>=r-jn+jm do jc[j4+1]=nil;j4=j4-1 end end;return iZ end;function __TS__ArrayToObject(jo)local jp={}do local a=0;while a<#jo do jp[a]=jo[a+1]a=a+1 end end;return jp end;function __TS__ArrayFlat(jo,jq)if jq==nil then jq=1 end;local u={}for bs,v in ipairs(jo)do if jq>0 and type(v)=="table"and(v[1]~=nil or next(v,nil)==nil)then u=__TS__ArrayConcat(u,__TS__ArrayFlat(v,jq-1))else u[#u+1]=v end end;return u end;function __TS__ArrayFlatMap(jo,bn)local u={}do local a=0;while a<#jo do local v=bn(_G,jo[a+1],a,jo)if type(v)=="table"and(v[1]~=nil or next(v,nil)==nil)then u=__TS__ArrayConcat(u,v)else u[#u+1]=v end;a=a+1 end end;return u end;function __TS__ArraySetLength(aO,aR)if aR<0 or aR~=aR or aR==math.huge or math.floor(aR)~=aR then error("invalid array length: "..tostring(aR),0)end;do local a=#aO-1;while a>=aR do aO[a+1]=nil;a=a-1 end end;return aR end;function __TS__Class(self)local jr={}jr.__index=jr;jr.prototype={}jr.prototype.__index=jr.prototype;jr.prototype.constructor=jr;return jr end;function __TS__ClassIndex(js,aW)while true do local jt=rawget(js,"____getters")if jt then local ju;ju=jt[aW]if ju then return ju(js)end end;js=rawget(js,"____super")if not js then break end;local bl=rawget(js,aW)if bl~=nil then return bl end end end;function __TS__ClassNewIndex(js,aW,bl)local jv=js;repeat do local jw=rawget(jv,"____setters")if jw then local jx;jx=jw[aW]if jx then jx(jv,bl)return end end;jv=rawget(jv,"____super")end until not jv;rawset(js,aW,bl)end;function __TS__Decorate(jy,aa,aW,jz)local u=aa;do local a=#jy;while a>=0 do local jA=jy[a+1]if jA then local jB=u;if aW==nil then u=jA(_G,u)elseif jz~=nil then u=jA(_G,aa,aW,u)else u=jA(_G,aa,aW)end;u=u or jB end;a=a-1 end end;return u end;function __TS__New(aa,...)local dy=setmetatable({},aa.prototype)dy:____constructor(...)return dy end;function __TS__FunctionCall(jC,jD,...)local V={...}return jC(jD,(unpack or table.unpack)(V))end;function __TS__GetErrorStack(self,aw)local a3=1;while true do local jE=debug.getinfo(a3,"f")a3=a3+1;if not jE then a3=1;break elseif jE.func==aw then break end end;return debug.traceback(nil,a3)end;function __TS__WrapErrorToString(self,jF)return function(self)local jG=__TS__FunctionCall(jF,self)local jH=debug.getinfo(3,"f")if _VERSION=="Lua 5.1"or jH and jH.func~=error then return jG else return tostring(jG).."\n"..tostring(self.stack)end end end;function __TS__InitErrorClass(self,N,d_)N.name=d_;return setmetatable(N,{__call=function(bs,jI,U)return __TS__New(N,U)end})end;Error=__TS__InitErrorClass(_G,(function()local bs=__TS__Class()bs.name="____"function bs.prototype.____constructor(self,U)if U==nil then U=""end;self.message=U;self.name="Error"self.stack=__TS__GetErrorStack(_G,self.constructor.new)local jJ=getmetatable(self)if not jJ.__errorToStringPatched then jJ.__errorToStringPatched=true;jJ.__tostring=__TS__WrapErrorToString(_G,jJ.__tostring)end end;function bs.prototype.__tostring(self)return(self.message~=""and function()return tostring(self.name)..": "..tostring(self.message)end or function()return self.name end)()end;return bs end)(),"Error")for bs,jK in ipairs({"RangeError","ReferenceError","SyntaxError","TypeError","URIError"})do _G[jK]=__TS__InitErrorClass(_G,(function()local bs=__TS__Class()bs.name="____"bs.____super=Error;setmetatable(bs,bs.____super)setmetatable(bs.prototype,bs.____super.prototype)function bs.prototype.____constructor(self,...)Error.prototype.____constructor(self,...)self.name=jK end;return bs end)(),jK)end;function __TS__FunctionApply(jC,jD,V)if V then return jC(jD,(unpack or table.unpack)(V))else return jC(jD)end end;function __TS__FunctionBind(jC,jD,...)local jL={...}return function(bs,...)local V={...}do local a=0;while a<#jL do table.insert(V,a+1,jL[a+1])a=a+1 end end;return jC(jD,(unpack or table.unpack)(V))end end;function __TS__Index(jM)return function(jv,aW)local jN=jM;while true do local bl=rawget(jN,aW)if bl~=nil then return bl end;local jt=rawget(jN,"____getters")if jt then local ju;ju=jt[aW]if ju then return ju(jv)end end;local jO=rawget(rawget(jN,"constructor"),"____super")if not jO then break end;jN=rawget(jO,"prototype")end end end;local jP={__tostring=function(self)if self.description==nil then return"Symbol()"else return"Symbol("..tostring(self.description)..")"end end}function __TS__Symbol(jG)return setmetatable({description=jG},jP)end;Symbol={iterator=__TS__Symbol("Symbol.iterator"),hasInstance=__TS__Symbol("Symbol.hasInstance"),species=__TS__Symbol("Symbol.species"),toStringTag=__TS__Symbol("Symbol.toStringTag")}function __TS__InstanceOf(jQ,jR)if type(jR)~="table"then error("Right-hand side of 'instanceof' is not an object",0)end;if jR[Symbol.hasInstance]~=nil then return not not jR[Symbol.hasInstance](jR,jQ)end;if jQ~=nil then local jS=jQ.constructor;while jS~=nil do if jS==jR then return true end;jS=jS.____super end end;return false end;function __TS__InstanceOfObject(v)local jT=type(v)return jT=="table"or jT=="function"end;function __TS__Iterator(jU)if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)return function()local u=jV:next()if not u.done then return u.value else return nil end end else local a=0;return function()a=a+1;return jU[a]end end end;Map=(function()local Map=__TS__Class()Map.name="Map"function Map.prototype.____constructor(self,jW)self[Symbol.toStringTag]="Map"self.items={}self.size=0;self.nextKey={}self.previousKey={}if jW==nil then return end;local jU=jW;if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)while true do local u=jV:next()if u.done then break end;local v=u.value;self:set(v[1],v[2])end else local jo=jW;for bs,jX in ipairs(jo)do self:set(jX[1],jX[2])end end end;function Map.prototype.clear(self)self.items={}self.nextKey={}self.previousKey={}self.firstKey=nil;self.lastKey=nil;self.size=0;return end;function Map.prototype.delete(self,aW)local jY=self:has(aW)if jY then self.size=self.size-1;local next=self.nextKey[aW]local jZ=self.previousKey[aW]if next and jZ then self.nextKey[jZ]=next;self.previousKey[next]=jZ elseif next then self.firstKey=next;self.previousKey[next]=nil elseif jZ then self.lastKey=jZ;self.nextKey[jZ]=nil else self.firstKey=nil;self.lastKey=nil end;self.nextKey[aW]=nil;self.previousKey[aW]=nil end;self.items[aW]=nil;return jY end;function Map.prototype.forEach(self,bn)for aW in __TS__Iterator(self:keys())do bn(_G,self.items[aW],aW,self)end;return end;function Map.prototype.get(self,aW)return self.items[aW]end;function Map.prototype.has(self,aW)return self.nextKey[aW]~=nil or self.lastKey==aW end;function Map.prototype.set(self,aW,v)local j_=not self:has(aW)if j_ then self.size=self.size+1 end;self.items[aW]=v;if self.firstKey==nil then self.firstKey=aW;self.lastKey=aW elseif j_ then self.nextKey[self.lastKey]=aW;self.previousKey[aW]=self.lastKey;self.lastKey=aW end;return self end;Map.prototype[Symbol.iterator]=function(self)return self:entries()end;function Map.prototype.entries(self)local hk=self.items;local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value={aW,hk[aW]}}aW=k0[aW]return u end}end;function Map.prototype.keys(self)local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value=aW}aW=k0[aW]return u end}end;function Map.prototype.values(self)local hk=self.items;local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value=hk[aW]}aW=k0[aW]return u end}end;Map[Symbol.species]=Map;return Map end)()function __TS__NewIndex(jM)return function(jv,aW,bl)local jN=jM;while true do local jw=rawget(jN,"____setters")if jw then local jx;jx=jw[aW]if jx then jx(jv,bl)return end end;local jO=rawget(rawget(jN,"constructor"),"____super")if not jO then break end;jN=rawget(jO,"prototype")end;rawset(jv,aW,bl)end end;function __TS__Number(v)local jT=type(v)if jT=="number"then return v elseif jT=="string"then local k1=tonumber(v)if k1 then return k1 end;if v=="Infinity"then return math.huge end;if v=="-Infinity"then return-math.huge end;local k2=string.gsub(v,"%s","")if k2==""then return 0 end;return 0/0 elseif jT=="boolean"then return v and 1 or 0 else return 0/0 end end;function __TS__NumberIsFinite(v)return type(v)=="number"and v==v and v~=math.huge and v~=-math.huge end;function __TS__NumberIsNaN(v)return v~=v end;local k3="0123456789abcdefghijklmnopqrstuvwxyz"function __TS__NumberToString(self,k4)if k4==nil or k4==10 or self==math.huge or self==-math.huge or self~=self then return tostring(self)end;k4=math.floor(k4)if k4<2 or k4>36 then error("toString() radix argument must be between 2 and 36",0)end;local k5,k6=math.modf(math.abs(self))local u=""if k4==8 then u=string.format("%o",k5)elseif k4==16 then u=string.format("%x",k5)else repeat do u=tostring(string.sub(k3,k5%k4+1,k5%k4+1))..tostring(u)k5=math.floor(k5/k4)end until not(k5~=0)end;if k6~=0 then u=tostring(u).."."local af=1e-16;repeat do k6=k6*k4;af=af*k4;local k7=math.floor(k6)u=tostring(u)..tostring(string.sub(k3,k7+1,k7+1))k6=k6-k7 end until not(k6>=af)end;if self<0 then u="-"..tostring(u)end;return u end;function __TS__ObjectAssign(d6,...)local k8={...}if d6==nil then return d6 end;for bs,bg in ipairs(k8)do for aW in pairs(bg)do d6[aW]=bg[aW]end end;return d6 end;function __TS__ObjectEntries(jQ)local u={}for aW in pairs(jQ)do u[#u+1]={aW,jQ[aW]}end;return u end;function __TS__ObjectFromEntries(jW)local jQ={}local jU=jW;if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)while true do local u=jV:next()if u.done then break end;local v=u.value;jQ[v[1]]=v[2]end else for bs,k9 in ipairs(jW)do jQ[k9[1]]=k9[2]end end;return jQ end;function __TS__ObjectKeys(jQ)local u={}for aW in pairs(jQ)do u[#u+1]=aW end;return u end;function __TS__ObjectRest(aa,ka)local u={}for kb in pairs(aa)do if not ka[kb]then u[kb]=aa[kb]end end;return u end;function __TS__ObjectValues(jQ)local u={}for aW in pairs(jQ)do u[#u+1]=jQ[aW]end;return u end;Set=(function()local Set=__TS__Class()Set.name="Set"function Set.prototype.____constructor(self,kc)self[Symbol.toStringTag]="Set"self.size=0;self.nextKey={}self.previousKey={}if kc==nil then return end;local jU=kc;if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)while true do local u=jV:next()if u.done then break end;self:add(u.value)end else local jo=kc;for bs,v in ipairs(jo)do self:add(v)end end end;function Set.prototype.add(self,v)local j_=not self:has(v)if j_ then self.size=self.size+1 end;if self.firstKey==nil then self.firstKey=v;self.lastKey=v elseif j_ then self.nextKey[self.lastKey]=v;self.previousKey[v]=self.lastKey;self.lastKey=v end;return self end;function Set.prototype.clear(self)self.nextKey={}self.previousKey={}self.firstKey=nil;self.lastKey=nil;self.size=0;return end;function Set.prototype.delete(self,v)local jY=self:has(v)if jY then self.size=self.size-1;local next=self.nextKey[v]local jZ=self.previousKey[v]if next and jZ then self.nextKey[jZ]=next;self.previousKey[next]=jZ elseif next then self.firstKey=next;self.previousKey[next]=nil elseif jZ then self.lastKey=jZ;self.nextKey[jZ]=nil else self.firstKey=nil;self.lastKey=nil end;self.nextKey[v]=nil;self.previousKey[v]=nil end;return jY end;function Set.prototype.forEach(self,bn)for aW in __TS__Iterator(self:keys())do bn(_G,aW,aW,self)end end;function Set.prototype.has(self,v)return self.nextKey[v]~=nil or self.lastKey==v end;Set.prototype[Symbol.iterator]=function(self)return self:values()end;function Set.prototype.entries(self)local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value={aW,aW}}aW=k0[aW]return u end}end;function Set.prototype.keys(self)local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value=aW}aW=k0[aW]return u end}end;function Set.prototype.values(self)local k0=self.nextKey;local aW=self.firstKey;return{[Symbol.iterator]=function(self)return self end,next=function(self)local u={done=not aW,value=aW}aW=k0[aW]return u end}end;Set[Symbol.species]=Set;return Set end)()WeakMap=(function()local WeakMap=__TS__Class()WeakMap.name="WeakMap"function WeakMap.prototype.____constructor(self,jW)self[Symbol.toStringTag]="WeakMap"self.items={}setmetatable(self.items,{__mode="k"})if jW==nil then return end;local jU=jW;if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)while true do local u=jV:next()if u.done then break end;local v=u.value;self.items[v[1]]=v[2]end else for bs,jX in ipairs(jW)do self.items[jX[1]]=jX[2]end end end;function WeakMap.prototype.delete(self,aW)local jY=self:has(aW)self.items[aW]=nil;return jY end;function WeakMap.prototype.get(self,aW)return self.items[aW]end;function WeakMap.prototype.has(self,aW)return self.items[aW]~=nil end;function WeakMap.prototype.set(self,aW,v)self.items[aW]=v;return self end;WeakMap[Symbol.species]=WeakMap;return WeakMap end)()WeakSet=(function()local WeakSet=__TS__Class()WeakSet.name="WeakSet"function WeakSet.prototype.____constructor(self,kc)self[Symbol.toStringTag]="WeakSet"self.items={}setmetatable(self.items,{__mode="k"})if kc==nil then return end;local jU=kc;if jU[Symbol.iterator]then local jV=jU[Symbol.iterator](jU)while true do local u=jV:next()if u.done then break end;self.items[u.value]=true end else for bs,v in ipairs(kc)do self.items[v]=true end end end;function WeakSet.prototype.add(self,v)self.items[v]=true;return self end;function WeakSet.prototype.delete(self,v)local jY=self:has(v)self.items[v]=nil;return jY end;function WeakSet.prototype.has(self,v)return self.items[v]==true end;WeakSet[Symbol.species]=WeakSet;return WeakSet end)()function __TS__SourceMapTraceBack(kd,ke)_G.__TS__sourcemap=_G.__TS__sourcemap or{}_G.__TS__sourcemap[kd]=ke;if _G.__TS__originalTraceback==nil then _G.__TS__originalTraceback=debug.traceback;debug.traceback=function(kf,U,a3)local kg=_G.__TS__originalTraceback(kf,U,a3)if type(kg)~="string"then return kg end;local u=string.gsub(kg,"(%S+).lua:(%d+)",function(m,kh)local ki=_G.__TS__sourcemap[tostring(m)..".lua"]if ki and ki[kh]then return tostring(m)..".ts:"..tostring(ki[kh])end;return tostring(m)..".lua:"..tostring(kh)end)return u end end end;function __TS__Spread(jU)local aO={}if type(jU)=="string"then do local a=0;while a<#jU do aO[#aO+1]=string.sub(jU,a+1,a+1)a=a+1 end end else for c9 in __TS__Iterator(jU)do aO[#aO+1]=c9 end end;return(table.unpack or unpack)(aO)end;function __TS__StringConcat(kj,...)local V={...}local iZ=kj;for bs,i_ in ipairs(V)do iZ=tostring(iZ)..tostring(i_)end;return iZ end;function __TS__StringEndsWith(self,kk,kl)if kl==nil or kl>#self then kl=#self end;return string.sub(self,kl-#kk+1,kl)==kk end;function __TS__StringPadEnd(self,km,kn)if kn==nil then kn=" "end;if km~=km then km=0 end;if km==-math.huge or km==math.huge then error("Invalid string length",0)end;if#self>=km or#kn==0 then return self end;km=km-#self;if km>#kn then kn=tostring(kn)..tostring(string.rep(kn,math.floor(km/#kn)))end;return tostring(self)..tostring(string.sub(kn,1,math.floor(km)))end;function __TS__StringPadStart(self,km,kn)if kn==nil then kn=" "end;if km~=km then km=0 end;if km==-math.huge or km==math.huge then error("Invalid string length",0)end;if#self>=km or#kn==0 then return self end;km=km-#self;if km>#kn then kn=tostring(kn)..tostring(string.rep(kn,math.floor(km/#kn)))end;return tostring(string.sub(kn,1,math.floor(km)))..tostring(self)end;function __TS__StringReplace(bg,ko,kp)ko=string.gsub(ko,"[%%%(%)%.%+%-%*%?%[%^%$]","%%%1")if type(kp)=="string"then kp=string.gsub(kp,"[%%%(%)%.%+%-%*%?%[%^%$]","%%%1")local u=string.gsub(bg,ko,kp,1)return u else local u=string.gsub(bg,ko,function(Y)return kp(_G,Y)end,1)return u end end;function __TS__StringSplit(bg,kq,kr)if kr==nil then kr=4294967295 end;if kr==0 then return{}end;local iZ={}local a4=0;local ks=0;if kq==nil or kq==""then while a4<#bg-1 and ks<kr do iZ[ks+1]=string.sub(bg,a4+1,a4+1)ks=ks+1;a4=a4+1 end else local kt=#kq;local ku=(string.find(bg,kq,nil,true)or 0)-1;while ku>=0 and ks<kr do iZ[ks+1]=string.sub(bg,a4+1,ku)ks=ks+1;a4=ku+kt;ku=(string.find(bg,kq,a4+1,true)or 0)-1 end end;if ks<kr then iZ[ks+1]=string.sub(bg,a4+1)end;return iZ end;function __TS__StringStartsWith(self,kk,cM)if cM==nil or cM<0 then cM=0 end;return string.sub(self,cM+1,#kk+cM)==kk end;function __TS__StringTrim(self)local u=string.gsub(self,"^[%s]*(.-)[%s]*$","%1")return u end;function __TS__StringTrimEnd(self)local u=string.gsub(self,"[%s]*$","")return u end;function __TS__StringTrimStart(self)local u=string.gsub(self,"^[%s]*","")return u end;local kv={}function __TS__SymbolRegistryFor(aW)if not kv[aW]then kv[aW]=__TS__Symbol(aW)end;return kv[aW]end;function __TS__SymbolRegistryKeyFor(kw)for aW in pairs(kv)do if kv[aW]==kw then return aW end end end;function __TS__TypeOf(v)local kx=type(v)if kx=="table"then return"object"elseif kx=="nil"then return"undefined"else return kx end end end}return require("src.main")